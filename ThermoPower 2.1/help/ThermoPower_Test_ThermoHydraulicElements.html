<HTML>
<HEAD>
<TITLE>ThermoPower.Test.ThermoHydraulicElements</TITLE>
<META name="HTML-Generator" content="Dymola">
<META name="description" content="&quot;Test for Thermal package elements and Flow1D models of Water and Gas packages&quot;">
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE ThermoHydraulicElements<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements"></A><A HREF="ThermoPower_Test.html#ThermoPower.Test"
>ThermoPower.Test</A>.ThermoHydraulicElements</H2>
<B>Test for Thermal package elements and Flow1D models of Water and Gas packages</B>
<P>
<H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestConvHT2N"
>TestConvHT2N</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestFlow1Da"
>TestFlow1Da</A>
</TD><TD>Test case for Flow1D</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestFlow1Db"
>TestFlow1Db</A>
</TD><TD>Test case for Flow1D</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestFlow1Dd"
>TestFlow1Dd</A>
</TD><TD>Test case for Flow1D</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestFlow1De"
>TestFlow1De</A>
</TD><TD>Test case for Flow1D</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestFlow1Df"
>TestFlow1Df</A>
</TD><TD>Test case for Flow1D</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestFlow1DSlowFast"
>TestFlow1DSlowFast</A>
</TD><TD>Test case for Flow1D</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestFlow1DDB"
>TestFlow1DDB</A>
</TD><TD>Test case for Flow1D</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestFlow1DfemA"
>TestFlow1DfemA</A>
</TD><TD>Test case for Flow1Dfem</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestFlow1DfemB"
>TestFlow1DfemB</A>
</TD><TD>Test case for Flow1Dfem</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestFlow1DfemC"
>TestFlow1DfemC</A>
</TD><TD>Test case for Flow1Dfem</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestFlow1DfemD"
>TestFlow1DfemD</A>
</TD><TD>Test case for Flow1Dfem</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestFlow1DfemE"
>TestFlow1DfemE</A>
</TD><TD>Test case for Flow1Dfem</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestFlow1DfemF"
>TestFlow1DfemF</A>
</TD><TD>Test case for Flow1Dfem</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phA"
>TestFlow1D2phA</A>
</TD><TD>Test case for Flow1D2ph</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phB"
>TestFlow1D2phB</A>
</TD><TD>Test case for Flow1D2ph</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phC"
>TestFlow1D2phC</A>
</TD><TD>Test case for Flow1D2ph</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phD"
>TestFlow1D2phD</A>
</TD><TD>Test case for Flow1D2ph</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.CheckFlow1D2phMassBalance"
>CheckFlow1D2phMassBalance</A>
</TD><TD>Checks Flow1D2ph equations for mass conservation</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phDB"
>TestFlow1D2phDB</A>
</TD><TD>Test case for Flow1D2phDB</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phDB_hf"
>TestFlow1D2phDB_hf</A>
</TD><TD>Test case for Flow1D2ph</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phChen"
>TestFlow1D2phChen</A>
</TD><TD>Test case for Flow1D2phChen</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phChen_hf"
>TestFlow1D2phChen_hf</A>
</TD><TD>Test case for Flow1D2ph</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestFlow1Dfem2ph"
>TestFlow1Dfem2ph</A>
</TD><TD>Test case for Flow1D2ph</TD></TR>
<TR><TD><IMG SRC="ThermoPower.Test.ThermoHydraulicElements.Flow1D_checkS.png" ALT="ThermoPower.Test.ThermoHydraulicElements.Flow1D_check" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.Flow1D_check"
>Flow1D_check</A>
</TD><TD>Extended Flow1D model with mass &amp; energy balance computation</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestGasFlow1DA"
>TestGasFlow1DA</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestGasFlow1DB"
>TestGasFlow1DB</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestGasFlow1DC"
>TestGasFlow1DC</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestGasFlow1DD"
>TestGasFlow1DD</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestEvaporatorTempS.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestEvaporatorTemp" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestEvaporatorTemp"
>TestEvaporatorTemp</A>
</TD><TD>&nbsp;</TD></TR>
<TR><TD><IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestEvaporatorTempS.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestEvaporatorFlux" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestEvaporatorFlux"
>TestEvaporatorFlux</A>
</TD><TD>&nbsp;</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestConvHT2N<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestConvHT2N"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestConvHT2N</H2>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestConvHT2ND.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestConvHT2N">
<H3>Information</H3>
<PRE></pre>
<p>This model is designed to test the <tt>ConvHT2N</tt> model.
<p> HTa tests the case with a bigger number of nodes on side1, HTb the case with an equal number of nodes on both sides, and HTc the case with a smaller number of nodes on side 1. It is possible to change <tt>Nbig</tt> and <tt>Nsmall</tt> to any value.
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>Nbig</TD><TD>6</TD><TD>&nbsp;</TD></TR>
<TR><TD>Integer</TD><TD>Nsmall</TD><TD>3</TD><TD>&nbsp;</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestConvHT2N
  <font color="blue">parameter </font>Integer Nbig = 6;
  <font color="blue">parameter </font>Integer Nsmall = 3;
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.ConvHT2N"
>Thermal.ConvHT2N</A> HTa(
    gamma=100,
    N1=Nbig,
    N2=Nsmall);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.TempSource1Dlin"
>Thermal.TempSource1Dlin</A> T1a(N=Nbig);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.TempSource1Dlin"
>Thermal.TempSource1Dlin</A> T2a(N=Nsmall);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> Constant1(k=300);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> Constant2(k=400);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> Constant3(k=280);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> Constant4(k=350);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.ConvHT2N"
>Thermal.ConvHT2N</A> HTb(
    gamma=100,
    N1=Nsmall,
    N2=Nsmall);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.TempSource1Dlin"
>Thermal.TempSource1Dlin</A> T1b(N=Nsmall);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.TempSource1Dlin"
>Thermal.TempSource1Dlin</A> T2b(N=Nsmall);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.ConvHT2N"
>Thermal.ConvHT2N</A> HTc(
    gamma=100,
    N1=Nsmall,
    N2=Nbig);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.TempSource1Dlin"
>Thermal.TempSource1Dlin</A> T1c(N=Nsmall);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.TempSource1Dlin"
>Thermal.TempSource1Dlin</A> T2c(N=Nbig);
<font color="blue">equation </font>
  <font color="red">connect</font>(T1a.wall, HTa.side1);
  <font color="red">connect</font>(HTa.side2, T2a.wall);
  <font color="red">connect</font>(Constant1.y, T1a.temperature_node1);
  <font color="red">connect</font>(Constant2.y, T1a.temperature_nodeN);
  <font color="red">connect</font>(Constant3.y, T2a.temperature_node1);
  <font color="red">connect</font>(Constant4.y, T2a.temperature_nodeN);
  <font color="red">connect</font>(T1b.wall, HTb.side1);
  <font color="red">connect</font>(HTb.side2, T2b.wall);
  <font color="red">connect</font>(T1c.wall, HTc.side1);
  <font color="red">connect</font>(HTc.side2, T2c.wall);
  <font color="red">connect</font>(Constant3.y, T2b.temperature_node1);
  <font color="red">connect</font>(Constant3.y, T2c.temperature_node1);
  <font color="red">connect</font>(Constant4.y, T2b.temperature_nodeN);
  <font color="red">connect</font>(Constant4.y, T2c.temperature_nodeN);
  <font color="red">connect</font>(Constant1.y, T1b.temperature_node1);
  <font color="red">connect</font>(Constant1.y, T1c.temperature_node1);
  <font color="red">connect</font>(Constant2.y, T1b.temperature_nodeN);
  <font color="red">connect</font>(Constant2.y, T1c.temperature_nodeN);
<font color="blue">end </font>TestConvHT2N;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestFlow1Da<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestFlow1Da"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestFlow1Da</H2>
<B>Test case for Flow1D</B><p>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DaD.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestFlow1Da">
<H3>Information</H3>
<PRE></pre>
<p>The model is designed to test the component  <tt>Flow1D</tt> (fluid side of a heat exchanger, finite volumes).<br>
This model represent the fluid side of a heat exchanger with an applied external heat flow. The operating fluid is liquid water.<br>
During the simulation, the inlet specific enthalpy, heat flux and mass flow rate are changed:
<ul>
    <li>t=0 s, Step variation of the specific enthalpy of the fluid entering the heat exchanger. The outlet temperature should undergo a step change 10 s later.</li>
    <li>t=30 s, Step variation of the thermal flow entering the heat exchanger lateral surface. The outlet temperature should undergo a ramp change lasting 10 s</li>
    <li>t=50 s, Step variation of the mass flow rate entering the heat exchanger. Again, the outlet temperature should undergo a ramp change lasting 10s</li>
</ul>
<p>
Simulation Interval = [0...80] sec <br>
Integration Algorithm = DASSL <br>
Algorithm Tolerance = 1e-6
</p>
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>Nnodes</TD><TD>20</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Lhex</TD><TD>10</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>Dihex</TD><TD>0.02</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A></TD><TD>rhex</TD><TD>Dihex/2</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omegahex</TD><TD>Modelica.Constants.pi*Dihex</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>Ahex</TD><TD>Modelica.Constants.pi*rhex^2</TD><TD>[m2]</TD></TR>
<TR><TD>Real</TD><TD>Cfhex</TD><TD>0.005</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>whex</TD><TD>0.31</TD><TD>[kg/s]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>phex</TD><TD>2e5</TD><TD>[Pa]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>hinhex</TD><TD>1e5</TD><TD>[J/kg]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>houthex</TD><TD>1e5</TD><TD>[J/kg]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>deltah</TD><TD>41800</TD><TD>[J/kg]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.EnergyFlowRate"
>EnergyFlowRate</A></TD><TD>W</TD><TD>41800*whex</TD><TD>[W]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestFlow1Da <font color="darkgreen">&quot;Test case for Flow1D&quot;</font>
  <font color="blue">package</font> Medium=<A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Water_WaterIF97_ph.html#Modelica.Media.Water.WaterIF97_ph"
>Modelica.Media.Water.WaterIF97_ph</A>;
  <font color="darkgreen">// number of Nodes</font>
  <font color="blue">parameter </font>Integer Nnodes=20;
  <font color="darkgreen">// total length</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> Lhex=10;
  <font color="darkgreen">// internal diameter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Modelica.SIunits.Diameter</A> Dihex=0.02;
  <font color="darkgreen">// internal radius</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Modelica.SIunits.Radius</A> rhex=Dihex/2;
  <font color="darkgreen">// internal perimeter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> omegahex=Modelica.Constants.pi*Dihex;
  <font color="darkgreen">// internal cross section</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</A> Ahex=Modelica.Constants.pi*rhex^2;
  <font color="darkgreen">// friction coefficient</font>
  <font color="blue">parameter </font>Real Cfhex=0.005;
  <font color="darkgreen">// nominal (and initial) mass flow rate</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> whex=0.31;
  <font color="darkgreen">// initial pressure</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</A> phex=2e5;
  <font color="darkgreen">// initial inlet specific enthalpy </font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> hinhex=1e5;
  <font color="darkgreen">// initial outlet specific enthalpy </font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> houthex=1e5;

  <font color="darkgreen">//height of enthalpy step </font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> deltah=41800;

  <font color="darkgreen">//height of power step</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.EnergyFlowRate"
>Modelica.SIunits.EnergyFlowRate</A> W=41800*whex;

  <font color="darkgreen">// transport time delay</font>
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A> tau;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SourceW"
>ThermoPower.Water.SourceW</A> Fluid_Source(
    p0=phex,
    h=hinhex,
    w0=whex);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SinkP"
>ThermoPower.Water.SinkP</A> Fluid_Sink(p0=phex/2);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.ValveLin"
>ThermoPower.Water.ValveLin</A> Valve(Kv=3e-6);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1D"
>ThermoPower.Water.Flow1D</A> hex(
    N=Nnodes,
    L=Lhex,
    omega=omegahex,
    Dhyd=Dihex,
    A=Ahex,
    wnom=whex,
    Cfnom=Cfhex,
    DynamicMomentum=false,
    hstartin=hinhex,
    hstartout=houthex,
    pstartin=phex,
    pstartout=phex,
  <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.Cfnom,
    initOpt=ThermoPower.Choices.Init.Options.steadyState);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> T_in(
  <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.HeatSource1D"
>ThermoPower.Thermal.HeatSource1D</A> HeatSource1D1(
    N=Nnodes,
    L=Lhex,
    omega=omegahex);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A> MassFlowRate(
    height=-0.02,
    offset=whex,
    startTime=50);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> Constant1;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A> InSpecEnthalpy(height=deltah, offset=hinhex,
    startTime=1);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A> ExtPower(height=W, startTime=30);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> T_out(
  <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium);
<font color="blue">equation </font>
  tau =<font color="red"> sum</font>(hex.rho)/Nnodes*Lhex*Ahex/whex;
  <font color="red">connect</font>(hex.outfl, Valve.inlet);
  <font color="red">connect</font>(T_in.outlet, hex.infl);
  <font color="red">connect</font>(Fluid_Source.flange, T_in.inlet);
  <font color="red">connect</font>(HeatSource1D1.wall, hex.wall);
  <font color="red">connect</font>(T_out.outlet, Fluid_Sink.flange);
  <font color="red">connect</font>(Valve.outlet, T_out.inlet);
  <font color="red">connect</font>(MassFlowRate.y, Fluid_Source.in_w0);
  <font color="red">connect</font>(InSpecEnthalpy.y, Fluid_Source.in_h);
  <font color="red">connect</font>(ExtPower.y, HeatSource1D1.power);
  <font color="red">connect</font>(Constant1.y, Valve.cmd);
<font color="blue">end </font>TestFlow1Da;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestFlow1Db<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestFlow1Db"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestFlow1Db</H2>
<B>Test case for Flow1D</B><p>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DbD.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestFlow1Db">
<H3>Information</H3>
<PRE></pre>
<p>The model is designed to test the component  <tt>Flow1D</tt> (fluid side of a heat exchanger, finite volumes). <br>
This model represent the fluid side of a heat exchanger with convective exchange with an external source of given temperature. The operating fluid is liquid water.<br>
During experiment the external (fixed) temperature changes:
<ul>
    <li>t=20 s, Step variation of the external temperature. Heat exchanger outlet temperature should vary accordingly to the transfer function (K1/(1+s*tau1))*(1-exp(-K2-s*tau2)), where the parameters K1, K2, tau1, tau1 depend on exchanger geometry, the fluid heat transfer coefficient and the operating conditions.</li>
</ul>
</p>
</p>
<p>
Simulation Interval = [0...200] sec <br>
Integration Algorithm = DASSL <br>
Algorithm Tolerance = 1e-6
</p>
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>Nnodes</TD><TD>20</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Lhex</TD><TD>200</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>Dihex</TD><TD>0.02</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A></TD><TD>rhex</TD><TD>Dihex/2</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omegahex</TD><TD>Modelica.Constants.pi*Dihex</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>Ahex</TD><TD>Modelica.Constants.pi*rhex^2</TD><TD>[m2]</TD></TR>
<TR><TD>Real</TD><TD>Cfhex</TD><TD>0.005</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>whex</TD><TD>0.31</TD><TD>[kg/s]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>phex</TD><TD>3e5</TD><TD>[Pa]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>hs</TD><TD>1e5</TD><TD>[J/kg]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestFlow1Db <font color="darkgreen">&quot;Test case for Flow1D&quot;</font>
  <font color="blue">package</font> Medium=<A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Water_WaterIF97OnePhase_ph.html#Modelica.Media.Water.WaterIF97OnePhase_ph"
>Modelica.Media.Water.WaterIF97OnePhase_ph</A>;
  <font color="darkgreen">// number of Nodes</font>
  <font color="blue">parameter </font>Integer Nnodes=20;
  <font color="darkgreen">// total length</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> Lhex=200;
  <font color="darkgreen">// internal diameter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Modelica.SIunits.Diameter</A> Dihex=0.02;
  <font color="darkgreen">// internal radius</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Modelica.SIunits.Radius</A> rhex=Dihex/2;
  <font color="darkgreen">// internal perimeter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> omegahex=Modelica.Constants.pi*Dihex;
  <font color="darkgreen">// internal cross section</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</A> Ahex=Modelica.Constants.pi*rhex^2;
  <font color="darkgreen">// friction coefficient</font>
  <font color="blue">parameter </font>Real Cfhex=0.005;
  <font color="darkgreen">// nominal (and initial) mass flow rate</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> whex=0.31;
  <font color="darkgreen">// initial pressure</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</A> phex=3e5;
  <font color="darkgreen">// initial inlet specific enthalpy </font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> hs=1e5;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1D"
>ThermoPower.Water.Flow1D</A> hex(
    N=Nnodes,
    L=Lhex,
    omega=omegahex,
    Dhyd=Dihex,
    A=Ahex,
    wnom=whex,
    Cfnom=Cfhex,
    HydraulicCapacitance=2,
    hstartin=hs,
    hstartout=hs,
    pstartin=phex,
    pstartout=phex,
  <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.Cfnom,
    initOpt=ThermoPower.Choices.Init.Options.steadyState);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.TempSource1D"
>ThermoPower.Thermal.TempSource1D</A> TempSource(N=Nnodes);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.ValveLin"
>ThermoPower.Water.ValveLin</A> ValveLin1(Kv=2*whex/phex);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SourceW"
>ThermoPower.Water.SourceW</A> FluidSource(
    w0=whex,
    p0=phex,
    h=hs);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SinkP"
>ThermoPower.Water.SinkP</A> FluidSink(p0=phex/2, h=hs);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A> Temperature(
    height=10,
    offset=297,
    startTime=20);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> Constant1;
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.ConvHT"
>ThermoPower.Thermal.ConvHT</A> ConvEx(N=Nnodes, gamma=400);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> T_in(
  <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> T_out(
  <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium);
<font color="blue">equation </font>
  <font color="red">connect</font>(hex.outfl, ValveLin1.inlet);
  <font color="red">connect</font>(ConvEx.side1, TempSource.wall);
  <font color="red">connect</font>(hex.wall, ConvEx.side2);
  <font color="red">connect</font>(T_in.inlet, FluidSource.flange);
  <font color="red">connect</font>(T_in.outlet, hex.infl);
  <font color="red">connect</font>(ValveLin1.outlet, T_out.inlet);
  <font color="red">connect</font>(T_out.outlet, FluidSink.flange);
  <font color="red">connect</font>(Temperature.y, TempSource.temperature);
  <font color="red">connect</font>(Constant1.y, ValveLin1.cmd);
<font color="blue">end </font>TestFlow1Db;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestFlow1Dd<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestFlow1Dd"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestFlow1Dd</H2>
<B>Test case for Flow1D</B><p>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DdD.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestFlow1Dd">
<H3>Information</H3>
<PRE></pre>
<p>The model is designed to test the component  <tt>Flow1D</tt> (fluid side of a heat exchanger, finite volumes).<br>
This model is designed to the test compressibility effects. The operating fluid is superheated vapour; the heat flow entering the heat exchanger is set to zero. <br>
During simulation mass flow rate changes:
<ul>
        <li>t=2 s, Step variation of the inlet mass flow rate. The pressure increases with a first order dynamics, the tube actually behaving like a pressurized tank.</li>
</ul>
</p>
</p>
<p>
Simulation Interval = [0...2] sec <br>
Integration Algorithm = DASSL <br>
Algorithm Tolerance = 1e-6
</p>
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>Nnodes</TD><TD>20</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Lhex</TD><TD>10</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>Dihex</TD><TD>0.02</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A></TD><TD>rhex</TD><TD>Dihex/2</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omegahex</TD><TD>Modelica.Constants.pi*Dihex</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>Ahex</TD><TD>Modelica.Constants.pi*rhex^2</TD><TD>[m2]</TD></TR>
<TR><TD>Real</TD><TD>Cfhex</TD><TD>0.005</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>whex</TD><TD>1e-2</TD><TD>[kg/s]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>phex</TD><TD>0.2e5</TD><TD>[Pa]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>hs</TD><TD>3e6</TD><TD>[J/kg]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestFlow1Dd <font color="darkgreen">&quot;Test case for Flow1D&quot;</font>
  <font color="blue">package</font> Medium=<A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Water_WaterIF97OnePhase_ph.html#Modelica.Media.Water.WaterIF97OnePhase_ph"
>Modelica.Media.Water.WaterIF97OnePhase_ph</A>;
  <font color="darkgreen">// number of Nodes</font>
  <font color="blue">parameter </font>Integer Nnodes=20;
  <font color="darkgreen">// total length</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> Lhex=10;
  <font color="darkgreen">// internal diameter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Modelica.SIunits.Diameter</A> Dihex=0.02;
  <font color="darkgreen">// internal radius</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Modelica.SIunits.Radius</A> rhex=Dihex/2;
  <font color="darkgreen">// internal perimeter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> omegahex=Modelica.Constants.pi*Dihex;
  <font color="darkgreen">// internal cross section</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</A> Ahex=Modelica.Constants.pi*rhex^2;
  <font color="darkgreen">// friction coefficient</font>
  <font color="blue">parameter </font>Real Cfhex=0.005;
  <font color="darkgreen">// nominal (and initial) mass flow rate</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> whex=1e-2;
  <font color="darkgreen">// initial pressure</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</A> phex=0.2e5;
  <font color="darkgreen">// initial specific enthalpy </font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> hs=3e6;
  <font color="darkgreen">// Time constant</font>
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A> tau;

  <A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1D"
>ThermoPower.Water.Flow1D</A> hex(
    N=Nnodes,
    L=Lhex,
    omega=omegahex,
    Dhyd=Dihex,
    A=Ahex,
    wnom=whex,
    Cfnom=Cfhex,
    HydraulicCapacitance=2,
    pstartin=phex,
    pstartout=phex,
    hstartin=hs,
    hstartout=hs,
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.Cfnom,
    initOpt=ThermoPower.Choices.Init.Options.steadyState);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SourceW"
>ThermoPower.Water.SourceW</A> MassFlowRateSource(
    w0=whex,
    h=hs);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SinkP"
>ThermoPower.Water.SinkP</A> FluidSink(
    p0=0,
    R=100,
    h=3e6);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.ValveLin"
>ThermoPower.Water.ValveLin</A> ValveLin1(Kv=1e-7);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A> MassFlowRateStep(
    height=whex/10,
    offset=whex,
    startTime=0.5);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> Constant1;
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.HeatSource1D"
>ThermoPower.Thermal.HeatSource1D</A> HeatSource1D1(
    N=Nnodes,
    L=Lhex,
    omega=omegahex);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> ExtPower(k=0);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensP"
>Water.SensP</A> SensP;
<font color="blue">equation </font>
  <font color="darkgreen">// RC constant of equivalent circuit</font>
  tau = (1/ValveLin1.Kv)*(Ahex*Lhex/1200^2);
  <font color="red">connect</font>(ValveLin1.inlet, hex.outfl);
  <font color="red">connect</font>(ValveLin1.outlet, FluidSink.flange);
  <font color="red">connect</font>(MassFlowRateSource.flange, hex.infl);
  <font color="red">connect</font>(HeatSource1D1.wall, hex.wall);
<font color="blue">initial </font><font color="blue">equation </font>
  <font color="red">der</font>(hex.p) = 0;
<font color="blue">equation </font>
  <font color="red">connect</font>(SensP.flange, ValveLin1.inlet);
  <font color="red">connect</font>(Constant1.y, ValveLin1.cmd);
  <font color="red">connect</font>(ExtPower.y, HeatSource1D1.power);
  <font color="red">connect</font>(MassFlowRateStep.y, MassFlowRateSource.in_w0);
<font color="blue">end </font>TestFlow1Dd;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestFlow1De<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestFlow1De"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestFlow1De</H2>
<B>Test case for Flow1D</B><p>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DeD.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestFlow1De">
<H3>Information</H3>
<PRE></pre>
<p>The model is designed to test the component  <tt>Flow1D</tt> (fluid side of a heat exchanger, model uses finite volumes).<br>
This model represent the two fluid sides of a heat exchanger in counterflow configuration. The operating fluid is liquid water.<br>
The mass flow rate during the experiment and initial conditions are the same for the two sides. <br>
During the simulation, the inlet specific enthalpy for hexA ("hot side") is changed:
<ul>
    <li>t=50 s, Step variation of the specific enthalpy of the fluid entering hexA .</li>
</ul>
The outlet temperature of the hot side starts changing after the fluid transport time delay, while the outlet temperature of the cold side starts changing immediately.
</p>
</p>
<p>
Simulation Interval = [0...900] sec <br>
Integration Algorithm = DASSL <br>
Algorithm Tolerance = 1e-6
</p>
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>Nnodes</TD><TD>20</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Lhex</TD><TD>200</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>Dihex</TD><TD>0.02</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A></TD><TD>rhex</TD><TD>Dihex/2</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omegahex</TD><TD>Modelica.Constants.pi*Dihex</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>Ahex</TD><TD>Modelica.Constants.pi*rhex^2</TD><TD>[m2]</TD></TR>
<TR><TD>Real</TD><TD>Cfhex</TD><TD>0.005</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>whex</TD><TD>0.31</TD><TD>[kg/s]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>phex</TD><TD>3e5</TD><TD>[Pa]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>hinhex</TD><TD>1e5</TD><TD>[J/kg]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>houthex</TD><TD>1e5</TD><TD>[J/kg]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestFlow1De <font color="darkgreen">&quot;Test case for Flow1D&quot;</font>
  <font color="blue">package</font> Medium=<A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Water_WaterIF97OnePhase_ph.html#Modelica.Media.Water.WaterIF97OnePhase_ph"
>Modelica.Media.Water.WaterIF97OnePhase_ph</A>;
  <font color="darkgreen">// number of Nodes</font>
  <font color="blue">parameter </font>Integer Nnodes=20;
  <font color="darkgreen">// total length</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> Lhex=200;
  <font color="darkgreen">// internal diameter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Modelica.SIunits.Diameter</A> Dihex=0.02;
  <font color="darkgreen">// internal radius</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Modelica.SIunits.Radius</A> rhex=Dihex/2;
  <font color="darkgreen">// internal perimeter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> omegahex=Modelica.Constants.pi*Dihex;
  <font color="darkgreen">// internal cross section</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</A> Ahex=Modelica.Constants.pi*rhex^2;
  <font color="darkgreen">// friction coefficient</font>
  <font color="blue">parameter </font>Real Cfhex=0.005;
  <font color="darkgreen">// nominal (and initial) mass flow rate</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> whex=0.31;
  <font color="darkgreen">// initial pressure</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</A> phex=3e5;
  <font color="darkgreen">// initial inlet specific enthalpy </font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> hinhex=1e5;
  <font color="darkgreen">// initial outlet specific enthalpy </font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> houthex=1e5;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1D"
>ThermoPower.Water.Flow1D</A> hexA(
    N=Nnodes,
    Nt=1,
    L=Lhex,
    omega=omegahex,
    Dhyd=Dihex,
    A=Ahex,
    wnom=whex,
    Cfnom=Cfhex,
    HydraulicCapacitance=2,
    hstartin=hinhex,
    hstartout=houthex,
    pstartin=phex,
    pstartout=phex,
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.Cfnom,
    initOpt=ThermoPower.Choices.Init.Options.steadyState);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SinkP"
>ThermoPower.Water.SinkP</A> SideA_FluidSink;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SinkP"
>ThermoPower.Water.SinkP</A> SideB_FluidSink;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SourceW"
>ThermoPower.Water.SourceW</A> SideA_MassFlowRate(
    w0=whex,
    p0=3e5);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.ValveLin"
>ThermoPower.Water.ValveLin</A> ValveLin1(Kv=whex/(2e5));
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.ValveLin"
>ThermoPower.Water.ValveLin</A> ValveLin2(Kv=whex/(2e5));
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1D"
>ThermoPower.Water.Flow1D</A> hexB(
    N=Nnodes,
    L=Lhex,
    omega=omegahex,
    Dhyd=Dihex,
    A=Ahex,
    wnom=whex,
    Cfnom=Cfhex,
    HydraulicCapacitance=2,
    hstartin=hinhex,
    hstartout=houthex,
    pstartin=phex,
    pstartout=phex,
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.Cfnom,
    initOpt=ThermoPower.Choices.Init.Options.steadyState);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> SensT_A_in(<font color="blue">redeclare </font><font color="blue">package</font> Medium =
        Medium);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A> SideA_InSpecEnth(
    height=1e5,
    offset=1e5,
    startTime=50);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> Constant1;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> Constant2;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> SensT_B_in(<font color="blue">redeclare </font><font color="blue">package</font> Medium =
        Medium);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SourceW"
>ThermoPower.Water.SourceW</A> SideB_MassFlowRate(w0=whex, p0=3e5);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.ConvHT"
>ThermoPower.Thermal.ConvHT</A> ConvExCF(N=Nnodes, gamma=400);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> SensT_A_out(<font color="blue">redeclare </font><font color="blue">package</font> Medium =
        Medium);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> SensT_B_out(<font color="blue">redeclare </font><font color="blue">package</font> Medium =
        Medium);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.CounterCurrent"
>Thermal.CounterCurrent</A> CounterCurrent1(N=Nnodes);
<font color="blue">equation </font>
  <font color="red">connect</font>(SideA_MassFlowRate.flange, SensT_A_in.inlet);
  <font color="red">connect</font>(SensT_A_in.outlet, hexA.infl);
  <font color="red">connect</font>(hexA.outfl, ValveLin1.inlet);
  <font color="red">connect</font>(ValveLin2.inlet, hexB.outfl);
  <font color="red">connect</font>(SensT_B_in.outlet, hexB.infl);
  <font color="red">connect</font>(SideB_MassFlowRate.flange, SensT_B_in.inlet);
  <font color="red">connect</font>(ConvExCF.side2, hexA.wall);
  <font color="red">connect</font>(ValveLin1.outlet, SensT_A_out.inlet);
  <font color="red">connect</font>(SensT_A_out.outlet, SideA_FluidSink.flange);
  <font color="red">connect</font>(SensT_B_out.outlet, SideB_FluidSink.flange);
  <font color="red">connect</font>(SensT_B_out.inlet, ValveLin2.outlet);
  <font color="red">connect</font>(ConvExCF.side1, CounterCurrent1.side2);
  <font color="red">connect</font>(CounterCurrent1.side1, hexB.wall);
  <font color="red">connect</font>(SideA_InSpecEnth.y, SideA_MassFlowRate.in_h);
  <font color="red">connect</font>(Constant2.y, ValveLin1.cmd);
  <font color="red">connect</font>(Constant1.y, ValveLin2.cmd);
<font color="blue">end </font>TestFlow1De;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestFlow1Df<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestFlow1Df"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestFlow1Df</H2>
<B>Test case for Flow1D</B><p>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DfD.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestFlow1Df">
<H3>Information</H3>
<PRE></pre>
<p>The model is designed to test the component  <tt>Flow1D</tt> (fluid side of a heat exchanger, model uses finite volumes).<br>
This model represent the two fluid sides of a heat exchanger in counterflow configuration. The two sides are divided by a metal wall. The operating fluid is liquid water. The mass flow rate during the experiment and initial conditions are the same for the two sides. <br>
During the simulation, the inlet specific enthalpy for hexA ("hot side") is changed:
<ul>
    <li>t=50 s, Step variation of the specific enthalpy of the fluid entering hexA .</li>
</ul>
The outlet temperature of the hot side changes after the fluid transport time delay and the first order delay due to the wall's thermal inertia. The outlet temperature of the cold side starts changing after the thermal inertia delay. </p>
<p>
Simulation Interval = [0...900] sec <br>
Integration Algorithm = DASSL <br>
Algorithm Tolerance = 1e-6
</p>
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>Nnodes</TD><TD>20</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Lhex</TD><TD>200</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>Dihex</TD><TD>0.02</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A></TD><TD>rhex</TD><TD>Dihex/2</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omegahex</TD><TD>Modelica.Constants.pi*Dihex</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>Ahex</TD><TD>Modelica.Constants.pi*rhex^2</TD><TD>[m2]</TD></TR>
<TR><TD>Real</TD><TD>Cfhex</TD><TD>0.005</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>whex</TD><TD>0.31</TD><TD>[kg/s]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>phex</TD><TD>3e5</TD><TD>[Pa]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>hinhex</TD><TD>1e5</TD><TD>[J/kg]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>houthex</TD><TD>1e5</TD><TD>[J/kg]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestFlow1Df <font color="darkgreen">&quot;Test case for Flow1D&quot;</font>
  <font color="blue">package</font> Medium=<A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Water_WaterIF97OnePhase_ph.html#Modelica.Media.Water.WaterIF97OnePhase_ph"
>Modelica.Media.Water.WaterIF97OnePhase_ph</A>;
  <font color="darkgreen">// number of Nodes</font>
  <font color="blue">parameter </font>Integer Nnodes=20;
  <font color="darkgreen">// total length</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> Lhex=200;
  <font color="darkgreen">// internal diameter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Modelica.SIunits.Diameter</A> Dihex=0.02;
  <font color="darkgreen">// internal radius</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Modelica.SIunits.Radius</A> rhex=Dihex/2;
  <font color="darkgreen">// internal perimeter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> omegahex=Modelica.Constants.pi*Dihex;
  <font color="darkgreen">// internal cross section</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</A> Ahex=Modelica.Constants.pi*rhex^2;
  <font color="darkgreen">// friction coefficient</font>
  <font color="blue">parameter </font>Real Cfhex=0.005;
  <font color="darkgreen">// nominal (and initial) mass flow rate</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> whex=0.31;
  <font color="darkgreen">// initial pressure</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</A> phex=3e5;
  <font color="darkgreen">// initial inlet specific enthalpy </font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> hinhex=1e5;
  <font color="darkgreen">// initial outlet specific enthalpy </font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> houthex=1e5;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1D"
>ThermoPower.Water.Flow1D</A> hexA(
    N=Nnodes,
    Nt=1,
    L=Lhex,
    omega=omegahex,
    Dhyd=Dihex,
    A=Ahex,
    wnom=whex,
    Cfnom=Cfhex,
    HydraulicCapacitance=2,
    hstartin=hinhex,
    hstartout=houthex,
    pstartin=phex,
    pstartout=phex,
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.Cfnom,
    initOpt=ThermoPower.Choices.Init.Options.steadyState);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.ConvHT"
>ThermoPower.Thermal.ConvHT</A> ConvHTB(N=Nnodes, gamma=400);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.ConvHT"
>ThermoPower.Thermal.ConvHT</A> ConvHTA(N=Nnodes, gamma=400);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SinkP"
>ThermoPower.Water.SinkP</A> SideA_FluidSink;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SinkP"
>ThermoPower.Water.SinkP</A> SideB_FluidSink;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SourceW"
>ThermoPower.Water.SourceW</A> SideA_MassFlowRate(
    w0=whex,
    p0=3e5);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.ValveLin"
>ThermoPower.Water.ValveLin</A> ValveLin1(Kv=whex/(2e5));
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.ValveLin"
>ThermoPower.Water.ValveLin</A> ValveLin2(Kv=whex/(2e5));
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1D"
>ThermoPower.Water.Flow1D</A> hexB(
    N=Nnodes,
    L=Lhex,
    omega=omegahex,
    Dhyd=Dihex,
    A=Ahex,
    wnom=whex,
    Cfnom=Cfhex,
    HydraulicCapacitance=2,
    hstartin=hinhex,
    hstartout=houthex,
    pstartin=phex,
    pstartout=phex,
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.Cfnom,
    initOpt=ThermoPower.Choices.Init.Options.steadyState);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.MetalTube"
>ThermoPower.Thermal.MetalTube</A> MetalWall(
    N=Nnodes,
    L=Lhex,
    lambda=20,
    rint=rhex,
    rext=rhex + 1e-3,
    rhomcm=4.9e6,
    Tstart1=297,
    TstartN=297,
    initOpt=ThermoPower.Choices.Init.Options.steadyState);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> SensT_A_in(<font color="blue">redeclare </font><font color="blue">package</font> Medium =
        Medium);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A> SideA_InSpecEnth(
    height=1e5,
    offset=1e5,
    startTime=50);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> Constant1;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> Constant2;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> SensT_B_in(<font color="blue">redeclare </font><font color="blue">package</font> Medium =
        Medium);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SourceW"
>ThermoPower.Water.SourceW</A> SourceW1(w0=whex, p0=3e5);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> SensT_A_out(<font color="blue">redeclare </font><font color="blue">package</font> Medium =
        Medium);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> SensT_B_out(<font color="blue">redeclare </font><font color="blue">package</font> Medium =
        Medium);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.CounterCurrent"
>Thermal.CounterCurrent</A> CounterCurrent1(N=Nnodes);
<font color="blue">equation </font>
  <font color="red">connect</font>(SideA_MassFlowRate.flange, SensT_A_in.inlet);
  <font color="red">connect</font>(SensT_A_in.outlet, hexA.infl);
  <font color="red">connect</font>(hexA.outfl, ValveLin1.inlet);
  <font color="red">connect</font>(ValveLin2.inlet, hexB.outfl);
  <font color="red">connect</font>(ConvHTB.side1, hexB.wall);
  <font color="red">connect</font>(hexA.wall, ConvHTA.side2);
  <font color="red">connect</font>(SensT_B_in.outlet, hexB.infl);
  <font color="red">connect</font>(SourceW1.flange, SensT_B_in.inlet);
  <font color="red">connect</font>(MetalWall.int, ConvHTA.side1);
  <font color="red">connect</font>(SensT_A_out.inlet, ValveLin1.outlet);
  <font color="red">connect</font>(SensT_A_out.outlet, SideA_FluidSink.flange);
  <font color="red">connect</font>(SensT_B_out.outlet, SideB_FluidSink.flange);
  <font color="red">connect</font>(SensT_B_out.inlet, ValveLin2.outlet);
  <font color="red">connect</font>(ConvHTB.side2, CounterCurrent1.side1);
  <font color="red">connect</font>(MetalWall.ext, CounterCurrent1.side2);
  <font color="red">connect</font>(Constant1.y, ValveLin2.cmd);
  <font color="red">connect</font>(SideA_InSpecEnth.y, SideA_MassFlowRate.in_h);
  <font color="red">connect</font>(Constant2.y, ValveLin1.cmd);
<font color="blue">end </font>TestFlow1Df;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestFlow1DSlowFast<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DSlowFast"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestFlow1DSlowFast</H2>
<B>Test case for Flow1D</B><p>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DSlowFastD.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DSlowFast">
<H3>Information</H3>
<PRE></pre>
<p>The model is designed to test the component  <tt>Flow1D</tt> (fluid side of a heat exchanger, finite volumes).<br>
This model represent the fluid side of a heat exchanger with an applied external heat flow. The operating fluid is liquid water.<p>
Different media models can be employed; incompressible medium models avoid fast pressure states.<p>
During the simulation, the inlet specific enthalpy, heat flux and mass flow rate are changed:
<ul>
    <li>t=0 s, Step variation of the specific enthalpy of the fluid entering the heat exchanger. The outlet temperature should undergo a step change 10 s later.</li>
    <li>t=30 s, Step variation of the thermal flow entering the heat exchanger lateral surface. The outlet temperature should undergo a ramp change lasting 10 s</li>
    <li>t=50 s, Step variation of the mass flow rate entering the heat exchanger. Again, the outlet temperature should undergo a ramp change lasting 10s</li>
</ul>
<p>
Simulation Interval = [0...80] sec <br>
Integration Algorithm = DASSL <br>
Algorithm Tolerance = 1e-6
</p>
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>Nnodes</TD><TD>20</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Lhex</TD><TD>10</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>Dihex</TD><TD>0.02</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A></TD><TD>rhex</TD><TD>Dihex/2</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omegahex</TD><TD>Modelica.Constants.pi*Dihex</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>Ahex</TD><TD>Modelica.Constants.pi*rhex^2</TD><TD>[m2]</TD></TR>
<TR><TD>Real</TD><TD>Cfhex</TD><TD>0.005</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>whex</TD><TD>0.31</TD><TD>[kg/s]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>phex</TD><TD>2e5</TD><TD>[Pa]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>hinhex</TD><TD>1e5</TD><TD>[J/kg]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>houthex</TD><TD>1e5</TD><TD>[J/kg]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>deltah</TD><TD>41800</TD><TD>[J/kg]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.EnergyFlowRate"
>EnergyFlowRate</A></TD><TD>W</TD><TD>41800*whex</TD><TD>[W]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestFlow1DSlowFast <font color="darkgreen">&quot;Test case for Flow1D&quot;</font>
  <font color="darkgreen">// package Medium=Modelica.Media.Water.WaterIF97OnePhase_ph;</font>
  <font color="blue">package</font> Medium=<A HREF="ThermoPower_Media_LiquidWaterConstant.html#ThermoPower.Media.LiquidWaterConstant"
>Media.LiquidWaterConstant</A>;

  <font color="darkgreen">// number of Nodes</font>
  <font color="blue">parameter </font>Integer Nnodes=20;
  <font color="darkgreen">// total length</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> Lhex=10;
  <font color="darkgreen">// internal diameter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Modelica.SIunits.Diameter</A> Dihex=0.02;
  <font color="darkgreen">// internal radius</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Modelica.SIunits.Radius</A> rhex=Dihex/2;
  <font color="darkgreen">// internal perimeter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> omegahex=Modelica.Constants.pi*Dihex;
  <font color="darkgreen">// internal cross section</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</A> Ahex=Modelica.Constants.pi*rhex^2;
  <font color="darkgreen">// friction coefficient</font>
  <font color="blue">parameter </font>Real Cfhex=0.005;
  <font color="darkgreen">// nominal (and initial) mass flow rate</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> whex=0.31;
  <font color="darkgreen">// initial pressure</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</A> phex=2e5;
  <font color="darkgreen">// initial inlet specific enthalpy </font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> hinhex=1e5;
  <font color="darkgreen">// initial outlet specific enthalpy </font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> houthex=1e5;

  <font color="darkgreen">//height of enthalpy step </font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> deltah=41800;

  <font color="darkgreen">//height of power step</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.EnergyFlowRate"
>Modelica.SIunits.EnergyFlowRate</A> W=41800*whex;

  <font color="darkgreen">// transport time delay</font>
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A> tau;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SourceW"
>ThermoPower.Water.SourceW</A> Fluid_Source(
    p0=phex,
    h=hinhex,
    w0=whex,
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SinkP"
>ThermoPower.Water.SinkP</A> Fluid_Sink(p0=phex/2, <font color="blue">redeclare </font><font color="blue">package</font> Medium =
        Medium);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.ValveLin"
>ThermoPower.Water.ValveLin</A> Valve(Kv=3e-6, <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1D"
>ThermoPower.Water.Flow1D</A> hex(
    N=Nnodes,
    L=Lhex,
    omega=omegahex,
    Dhyd=Dihex,
    A=Ahex,
    wnom=whex,
    DynamicMomentum=false,
    hstartin=hinhex,
    hstartout=houthex,
    pstartin=phex,
    pstartout=phex,
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.NoFriction,
    initOpt=ThermoPower.Choices.Init.Options.steadyState);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> T_in(<font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.HeatSource1D"
>ThermoPower.Thermal.HeatSource1D</A> HeatSource1D1(
    N=Nnodes,
    L=Lhex,
    omega=omegahex);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A> MassFlowRate(
    height=-0.02,
    offset=whex,
    startTime=50);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> Constant1;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A> InSpecEnthalpy(height=deltah, offset=hinhex,
    startTime=1);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A> ExtPower(height=W, startTime=30);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> T_out(<font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium);
<font color="blue">equation </font>
  tau =<font color="red"> sum</font>(hex.rho)/Nnodes*Lhex*Ahex/whex;
  <font color="red">connect</font>(hex.outfl, Valve.inlet);
  <font color="red">connect</font>(T_in.outlet, hex.infl);
  <font color="red">connect</font>(Fluid_Source.flange, T_in.inlet);
  <font color="red">connect</font>(HeatSource1D1.wall, hex.wall);
  <font color="red">connect</font>(T_out.outlet, Fluid_Sink.flange);
  <font color="red">connect</font>(Valve.outlet, T_out.inlet);
  <font color="red">connect</font>(MassFlowRate.y, Fluid_Source.in_w0);
  <font color="red">connect</font>(InSpecEnthalpy.y, Fluid_Source.in_h);
  <font color="red">connect</font>(ExtPower.y, HeatSource1D1.power);
  <font color="red">connect</font>(Constant1.y, Valve.cmd);
<font color="blue">end </font>TestFlow1DSlowFast;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestFlow1DDB<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DDB"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestFlow1DDB</H2>
<B>Test case for Flow1D</B><p>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DDBD.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DDB">
<H3>Information</H3>
<PRE></pre>
<p>The model is designed to test the component  <tt>Flow1D</tt> (fluid side of a heat exchanger, finite volumes). <br>
This model represent the fluid side of a heat exchanger with convective exchange with an external source of given temperature. The operating fluid is liquid water.<br>
During experiment the external (fixed) temperature changes:
<ul>
    <li>t=20 s, Step variation of the external temperature. Heat exchanger outlet temperature should vary accordingly to the transfer function (K1/(1+s*tau1))*(1-exp(-K2-s*tau2)), where the parameters K1, K2, tau1, tau1 depend on exchanger geometry, the fluid heat transfer coefficient and the operating conditions.</li>
</ul>
</p>
</p>
<p>
Simulation Interval = [0...200] sec <br>
Integration Algorithm = DASSL <br>
Algorithm Tolerance = 1e-6
</p>
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>Nnodes</TD><TD>20</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Lhex</TD><TD>200</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>Dihex</TD><TD>0.02</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A></TD><TD>rhex</TD><TD>Dihex/2</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omegahex</TD><TD>Modelica.Constants.pi*Dihex</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>Ahex</TD><TD>Modelica.Constants.pi*rhex^2</TD><TD>[m2]</TD></TR>
<TR><TD>Real</TD><TD>Cfhex</TD><TD>0.005</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>whex</TD><TD>0.31</TD><TD>[kg/s]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>phex</TD><TD>3e5</TD><TD>[Pa]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>hs</TD><TD>1e5</TD><TD>[J/kg]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestFlow1DDB <font color="darkgreen">&quot;Test case for Flow1D&quot;</font>
  <font color="blue">package</font> Medium=<A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Water_WaterIF97OnePhase_ph.html#Modelica.Media.Water.WaterIF97OnePhase_ph"
>Modelica.Media.Water.WaterIF97OnePhase_ph</A>;
  <font color="darkgreen">// number of Nodes</font>
  <font color="blue">parameter </font>Integer Nnodes=20;
  <font color="darkgreen">// total length</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> Lhex=200;
  <font color="darkgreen">// internal diameter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Modelica.SIunits.Diameter</A> Dihex=0.02;
  <font color="darkgreen">// internal radius</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Modelica.SIunits.Radius</A> rhex=Dihex/2;
  <font color="darkgreen">// internal perimeter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> omegahex=Modelica.Constants.pi*Dihex;
  <font color="darkgreen">// internal cross section</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</A> Ahex=Modelica.Constants.pi*rhex^2;
  <font color="darkgreen">// friction coefficient</font>
  <font color="blue">parameter </font>Real Cfhex=0.005;
  <font color="darkgreen">// nominal (and initial) mass flow rate</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> whex=0.31;
  <font color="darkgreen">// initial pressure</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</A> phex=3e5;
  <font color="darkgreen">// initial inlet specific enthalpy </font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> hs=1e5;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1DDB"
>Water.Flow1DDB</A> hex(
    N=Nnodes,
    L=Lhex,
    omega=omegahex,
    Dhyd=Dihex,
    A=Ahex,
    wnom=whex,
    Cfnom=Cfhex,
    HydraulicCapacitance=2,
    hstartin=hs,
    hstartout=hs,
    pstartin=phex,
    pstartout=phex,
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.Cfnom,
    initOpt=ThermoPower.Choices.Init.Options.steadyState);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.TempSource1D"
>Thermal.TempSource1D</A> TempSource(N=Nnodes);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.ValveLin"
>ThermoPower.Water.ValveLin</A> ValveLin1(Kv=2*whex/phex);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SourceW"
>ThermoPower.Water.SourceW</A> FluidSource(
    w0=whex,
    p0=phex,
    h=hs);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SinkP"
>ThermoPower.Water.SinkP</A> FluidSink(p0=phex/2, h=hs);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A> Temperature(
    height=10,
    offset=297,
    startTime=20);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> Constant1;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> T_in(
  <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> T_out(
  <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.ConvHT_htc"
>ThermoPower.Thermal.ConvHT_htc</A> ConvHTe_htc1(N=Nnodes);
<font color="blue">equation </font>
  <font color="red">connect</font>(hex.outfl, ValveLin1.inlet);
  <font color="red">connect</font>(ValveLin1.outlet, T_out.inlet);
  <font color="red">connect</font>(T_out.outlet, FluidSink.flange);
  <font color="red">connect</font>(ConvHTe_htc1.fluidside, hex.wall);
  <font color="red">connect</font>(ConvHTe_htc1.otherside, TempSource.wall);
  <font color="red">connect</font>(Temperature.y, TempSource.temperature);
  <font color="red">connect</font>(Constant1.y, ValveLin1.cmd);
  <font color="red">connect</font>(FluidSource.flange, T_in.inlet);
  <font color="red">connect</font>(T_in.outlet, hex.infl);
<font color="blue">end </font>TestFlow1DDB;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestFlow1DfemA<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DfemA"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestFlow1DfemA</H2>
<B>Test case for Flow1Dfem</B><p>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DfemAD.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DfemA">
<H3>Information</H3>
<PRE></pre>
<p>The model is designed to test the component  <tt>Flow1Dfem</tt> (fluid side of a heat exchanger, finite element method).<br>
This model represent the fluid side of a heat exchanger with an applied external heat flow. The operating fluid is liquid water.<br>
During the simulation, the inlet specific enthalpy, heat flux and mass flow rate are changed:
<ul>
    <li>t=0 s, Step variation of the specific enthalpy of the fluid entering the heat exchanger. The outlet temperature should undergo a step change 10 s later.</li>
    <li>t=30 s, Step variation of the thermal flow entering the heat exchanger lateral surface. The outlet temperature should undergo a ramp change lasting 10 s</li>
    <li>t=50 s, Step variation of the mass flow rate entering the heat exchanger. Again, the outlet temperature should undergo a ramp change lasting 10s</li>
</ul>
<p>
Simulation Interval = [0...80] sec <br>
Integration Algorithm = DASSL <br>
Algorithm Tolerance = 1e-6
</p>
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>Nnodes</TD><TD>20</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Lhex</TD><TD>10</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>Dihex</TD><TD>0.02</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A></TD><TD>rhex</TD><TD>Dihex/2</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omegahex</TD><TD>Modelica.Constants.pi*Dihex</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>Ahex</TD><TD>Modelica.Constants.pi*rhex^2</TD><TD>[m2]</TD></TR>
<TR><TD>Real</TD><TD>Cfhex</TD><TD>0.005</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>whex</TD><TD>0.3</TD><TD>[kg/s]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>phex</TD><TD>2e5</TD><TD>[Pa]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>hinhex</TD><TD>1e5</TD><TD>[J/kg]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>houthex</TD><TD>1e5</TD><TD>[J/kg]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>deltah</TD><TD>41800</TD><TD>[J/kg]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.EnergyFlowRate"
>EnergyFlowRate</A></TD><TD>W</TD><TD>41800*whex</TD><TD>[W]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestFlow1DfemA <font color="darkgreen">&quot;Test case for Flow1Dfem&quot;</font>
  <font color="blue">package</font> Medium=<A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Water_WaterIF97OnePhase_ph.html#Modelica.Media.Water.WaterIF97OnePhase_ph"
>Modelica.Media.Water.WaterIF97OnePhase_ph</A>;
  <font color="darkgreen">// number of Nodes</font>
  <font color="blue">parameter </font>Integer Nnodes=20;
  <font color="darkgreen">// total length</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> Lhex=10;
  <font color="darkgreen">// internal diameter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Modelica.SIunits.Diameter</A> Dihex=0.02;
  <font color="darkgreen">// internal radius</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Modelica.SIunits.Radius</A> rhex=Dihex/2;
  <font color="darkgreen">// internal perimeter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> omegahex=Modelica.Constants.pi*Dihex;
  <font color="darkgreen">// internal cross section</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</A> Ahex=Modelica.Constants.pi*rhex^2;
  <font color="darkgreen">// friction coefficient</font>
  <font color="blue">parameter </font>Real Cfhex=0.005;
  <font color="darkgreen">// nominal (and initial) mass flow rate</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> whex=0.3;
  <font color="darkgreen">// initial pressure</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</A> phex=2e5;
  <font color="darkgreen">// initial inlet specific enthalpy </font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> hinhex=1e5;
  <font color="darkgreen">// initial outlet specific enthalpy </font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> houthex=1e5;

  <font color="darkgreen">//height of enthalpy step </font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> deltah=41800;

  <font color="darkgreen">//height of power step</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.EnergyFlowRate"
>Modelica.SIunits.EnergyFlowRate</A> W=41800*whex;

  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SourceW"
>ThermoPower.Water.SourceW</A> Fluid_Source(
    p0=phex,
    h=hinhex,
    w0=whex);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SinkP"
>ThermoPower.Water.SinkP</A> Fluid_Sink(p0=phex/2);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.ValveLin"
>ThermoPower.Water.ValveLin</A> Valve(Kv=3e-6);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1Dfem"
>ThermoPower.Water.Flow1Dfem</A> hex(
    N=Nnodes,
    L=Lhex,
    omega=omegahex,
    Dhyd=Dihex,
    A=Ahex,
    wnom=whex,
    Cfnom=Cfhex,
    DynamicMomentum=false,
    hstartin=hinhex,
    hstartout=houthex,
    pstartin=phex,
    pstartout=phex,
  <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.Cfnom,
    initOpt=ThermoPower.Choices.Init.Options.steadyState);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> T_in(
  <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.HeatSource1D"
>ThermoPower.Thermal.HeatSource1D</A> HeatSource1D1(
    N=Nnodes,
    L=Lhex,
    omega=omegahex);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A> MassFlowRate(
    height=-0.02,
    offset=whex,
    startTime=50);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> Constant1;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A> InSpecEnthalpy(height=deltah, offset=hinhex,
    startTime=1);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A> ExtPower(height=W, startTime=30);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> T_out(
  <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium);
<font color="blue">equation </font>
  <font color="red">connect</font>(hex.outfl, Valve.inlet);
  <font color="red">connect</font>(T_in.outlet, hex.infl);
  <font color="red">connect</font>(Fluid_Source.flange, T_in.inlet);
  <font color="red">connect</font>(HeatSource1D1.wall, hex.wall);
  <font color="red">connect</font>(T_out.outlet, Fluid_Sink.flange);
  <font color="red">connect</font>(Valve.outlet, T_out.inlet);
  <font color="red">connect</font>(MassFlowRate.y, Fluid_Source.in_w0);
  <font color="red">connect</font>(InSpecEnthalpy.y, Fluid_Source.in_h);
  <font color="red">connect</font>(ExtPower.y, HeatSource1D1.power);
  <font color="red">connect</font>(Constant1.y, Valve.cmd);
<font color="blue">end </font>TestFlow1DfemA;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestFlow1DfemB<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DfemB"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestFlow1DfemB</H2>
<B>Test case for Flow1Dfem</B><p>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DfemBD.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DfemB">
<H3>Information</H3>
<PRE></pre>
<p>The model is designed to test the component  <tt>Flow1Dfem</tt> (fluid side of a heat exchanger, finite element method). <br>
This model represent the fluid side of a heat exchanger with convective exchange with an external source at a given temperature.<br>
The operating fluid is liquid water.<br>
During the experiment the external (fixed) temperature changes:
<ul>
        <li>t=20 s, Step variation of the external temperature. Heat exchanger outlet temperature should vary accordingly to the transfer function (K1/(1+s*tau1))*(1-exp(-K2-s*tau2)), where the parameters K1, K2, tau1, tau1 depend on exchanger geometry, the fluid heat transfer coefficient and operating conditions.</li>
</ul>
</p>
</p>
<p>
Simulation Interval = [0...200] sec <br>
Integration Algorithm = DASSL <br>
Algorithm Tolerance = 1e-6
</p>
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>Nnodes</TD><TD>20</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Lhex</TD><TD>200</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>Dihex</TD><TD>0.02</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A></TD><TD>rhex</TD><TD>Dihex/2</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omegahex</TD><TD>Modelica.Constants.pi*Dihex</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>Ahex</TD><TD>Modelica.Constants.pi*rhex^2</TD><TD>[m2]</TD></TR>
<TR><TD>Real</TD><TD>Cfhex</TD><TD>0.005</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>whex</TD><TD>0.31</TD><TD>[kg/s]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>phex</TD><TD>3e5</TD><TD>[Pa]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>hs</TD><TD>1e5</TD><TD>[J/kg]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestFlow1DfemB <font color="darkgreen">&quot;Test case for Flow1Dfem&quot;</font>
  <font color="blue">package</font> Medium=<A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Water_WaterIF97OnePhase_ph.html#Modelica.Media.Water.WaterIF97OnePhase_ph"
>Modelica.Media.Water.WaterIF97OnePhase_ph</A>;
  <font color="darkgreen">// number of Nodes</font>
  <font color="blue">parameter </font>Integer Nnodes=20;
  <font color="darkgreen">// total length</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> Lhex=200;
  <font color="darkgreen">// internal diameter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Modelica.SIunits.Diameter</A> Dihex=0.02;
  <font color="darkgreen">// internal radius</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Modelica.SIunits.Radius</A> rhex=Dihex/2;
  <font color="darkgreen">// internal perimeter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> omegahex=Modelica.Constants.pi*Dihex;
  <font color="darkgreen">// internal cross section</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</A> Ahex=Modelica.Constants.pi*rhex^2;
  <font color="darkgreen">// friction coefficient</font>
  <font color="blue">parameter </font>Real Cfhex=0.005;
  <font color="darkgreen">// nominal (and initial) mass flow rate</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> whex=0.31;
  <font color="darkgreen">// initial pressure</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</A> phex=3e5;
  <font color="darkgreen">// initial inlet specific enthalpy </font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> hs=1e5;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1Dfem"
>ThermoPower.Water.Flow1Dfem</A> hex(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium=Medium,
    N=Nnodes,
    L=Lhex,
    omega=omegahex,
    Dhyd=Dihex,
    A=Ahex,
    wnom=whex,
    Cfnom=Cfhex,
    HydraulicCapacitance=2,
    hstartin=hs,
    hstartout=hs,
    pstartin=phex,
    pstartout=phex,
    alpha=1,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.Cfnom,
    initOpt=ThermoPower.Choices.Init.Options.steadyState);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.TempSource1D"
>ThermoPower.Thermal.TempSource1D</A> TempSource(N=Nnodes);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.ValveLin"
>ThermoPower.Water.ValveLin</A> ValveLin1(Kv=2*whex/phex);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SourceW"
>ThermoPower.Water.SourceW</A> FluidSource(
    w0=whex,
    p0=phex,
    h=hs);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SinkP"
>ThermoPower.Water.SinkP</A> FluidSink(p0=phex/2, h=hs);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A> Temperature(
    height=10,
    offset=297,
    startTime=20);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> Constant1;
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.ConvHT"
>ThermoPower.Thermal.ConvHT</A> ConvEx(N=Nnodes, gamma=400);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> T_in(<font color="blue">redeclare </font><font color="blue">package</font> Medium=Medium);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> T_out(<font color="blue">redeclare </font><font color="blue">package</font> Medium=Medium);
<font color="blue">equation </font>
  <font color="red">connect</font>(hex.outfl, ValveLin1.inlet);
  <font color="red">connect</font>(ConvEx.side1, TempSource.wall);
  <font color="red">connect</font>(hex.wall, ConvEx.side2);
  <font color="red">connect</font>(T_in.inlet, FluidSource.flange);
  <font color="red">connect</font>(T_in.outlet, hex.infl);
  <font color="red">connect</font>(ValveLin1.outlet, T_out.inlet);
  <font color="red">connect</font>(T_out.outlet, FluidSink.flange);
  <font color="red">connect</font>(Temperature.y, TempSource.temperature);
  <font color="red">connect</font>(Constant1.y, ValveLin1.cmd);
<font color="blue">end </font>TestFlow1DfemB;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestFlow1DfemC<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DfemC"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestFlow1DfemC</H2>
<B>Test case for Flow1Dfem</B><p>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DfemCD.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DfemC">
<H3>Information</H3>
<PRE></pre>
<p>The model is designed to test the component  <tt>Flow1Dfem</tt> (fluid side of a heat exchanger, finite element method). <br>
This model is designed to simulate the flow reversal througth the heat exchanger. The operating fluid is liquid water; the heat flux entering the heat exchanger is set to zero. <br>
During the simulation, flow reversal is achieved:
<ul>
        <li>t=500 s, Negative ramp variation (duration = 20 s) of the mass flow rate trough the heat exchanger. The final mass flow rate has the same magnitude and opposite direction with respect to the initial one.</li>
</ul>
</p>
</p>
<p>
Simulation Interval = [0...1000] sec <br>
Integration Algorithm = DASSL <br>
Algorithm Tolerance = 1e-6
</p>
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>Nnodes</TD><TD>20</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Lhex</TD><TD>200</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>Dihex</TD><TD>0.02</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A></TD><TD>rhex</TD><TD>Dihex/2</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omegahex</TD><TD>Modelica.Constants.pi*Dihex</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>Ahex</TD><TD>Modelica.Constants.pi*rhex^2</TD><TD>[m2]</TD></TR>
<TR><TD>Real</TD><TD>Cfhex</TD><TD>0.005</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>whex</TD><TD>0.3</TD><TD>[kg/s]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>phex</TD><TD>1e5</TD><TD>[Pa]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>hs</TD><TD>1e5</TD><TD>[J/kg]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestFlow1DfemC <font color="darkgreen">&quot;Test case for Flow1Dfem&quot;</font>
  <font color="blue">package</font> Medium=<A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Water_WaterIF97OnePhase_ph.html#Modelica.Media.Water.WaterIF97OnePhase_ph"
>Modelica.Media.Water.WaterIF97OnePhase_ph</A>;
  <font color="darkgreen">// number of Nodes</font>
  <font color="blue">parameter </font>Integer Nnodes=20;
  <font color="darkgreen">// total length</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> Lhex=200;
  <font color="darkgreen">// internal diameter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Modelica.SIunits.Diameter</A> Dihex=0.02;
  <font color="darkgreen">// internal radius</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Modelica.SIunits.Radius</A> rhex=Dihex/2;
  <font color="darkgreen">// internal perimeter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> omegahex=Modelica.Constants.pi*Dihex;
  <font color="darkgreen">// internal cross section</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</A> Ahex=Modelica.Constants.pi*rhex^2;
  <font color="darkgreen">// friction coefficient</font>
  <font color="blue">parameter </font>Real Cfhex=0.005;
  <font color="darkgreen">// nominal (and initial) mass flow rate</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> whex=0.3;
  <font color="darkgreen">// initial pressure</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</A> phex=1e5;
  <font color="darkgreen">// initial specific enthalpy </font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> hs=1e5;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1Dfem"
>ThermoPower.Water.Flow1Dfem</A> hex(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium=Medium,
    N=Nnodes,
    L=Lhex,
    omega=omegahex,
    Dhyd=Dihex,
    A=Ahex,
    wnom=whex,
    Cfnom=Cfhex,
    HydraulicCapacitance=2,
    hstartin=hs,
    hstartout=hs,
    DynamicMomentum=false,
    pstartin=2*phex,
    pstartout=2*phex,
    alpha=1,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.Cfnom,
    initOpt=ThermoPower.Choices.Init.Options.steadyState);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.ValveLin"
>ThermoPower.Water.ValveLin</A> ValveLin1(Kv=2*whex/phex);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SinkP"
>ThermoPower.Water.SinkP</A> SinkP1(h=hs, p0=4*phex);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SourceW"
>ThermoPower.Water.SourceW</A> SourceW1(
    w0=whex,
    G=0,
    p0=2*phex,
    h=2*hs);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> Ramp1(
    duration=20,
    height=-2*whex,
    offset=whex,
    startTime=500);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> Constant1;
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.HeatSource1D"
>ThermoPower.Thermal.HeatSource1D</A> HeatSource1D1(
    N=Nnodes,
    L=Lhex,
    omega=omegahex);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> Constant2(k=0);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> T_in(<font color="blue">redeclare </font><font color="blue">package</font> Medium=Medium);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> T_out(<font color="blue">redeclare </font><font color="blue">package</font> Medium=Medium);
<font color="blue">equation </font>
  <font color="red">connect</font>(ValveLin1.outlet, SinkP1.flange);
  <font color="red">connect</font>(HeatSource1D1.wall, hex.wall);
  <font color="red">connect</font>(SourceW1.flange, T_in.inlet);
  <font color="red">connect</font>(T_in.outlet, hex.infl);
  <font color="red">connect</font>(hex.outfl, T_out.inlet);
  <font color="red">connect</font>(T_out.outlet, ValveLin1.inlet);
  <font color="red">connect</font>(Ramp1.y, SourceW1.in_w0);
  <font color="red">connect</font>(Constant2.y, HeatSource1D1.power);
  <font color="red">connect</font>(Constant1.y, ValveLin1.cmd);
<font color="blue">end </font>TestFlow1DfemC;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestFlow1DfemD<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DfemD"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestFlow1DfemD</H2>
<B>Test case for Flow1Dfem</B><p>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DfemDD.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DfemD">
<H3>Information</H3>
<PRE></pre>
<p>The model is designed to test the component  <tt>Flow1Dfem</tt> (fluid side of a heat exchanger, finite element method).<br>
This model is designed to the test compressibility effects. The operating fluid is superheated vapour; the heat flow entering the heat exchanger is set to zero. <br>
During simulation mass flow rate changes:
<ul>
        <li>t=2 s, Step variation of the inlet mass flow rate. The pressure increases with a first order dynamics, the tube actually behaving like a pressurized tank.</li>
</ul>
</p>
</p>
<p>
Simulation Interval = [0...2] sec <br>
Integration Algorithm = DASSL <br>
Algorithm Tolerance = 1e-6
</p>
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>Nnodes</TD><TD>20</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Lhex</TD><TD>10</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>Dihex</TD><TD>0.02</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A></TD><TD>rhex</TD><TD>Dihex/2</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omegahex</TD><TD>Modelica.Constants.pi*Dihex</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>Ahex</TD><TD>Modelica.Constants.pi*rhex^2</TD><TD>[m2]</TD></TR>
<TR><TD>Real</TD><TD>Cfhex</TD><TD>0.005</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>whex</TD><TD>1e-2</TD><TD>[kg/s]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>phex</TD><TD>0.2e5</TD><TD>[Pa]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>hs</TD><TD>3e6</TD><TD>[J/kg]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestFlow1DfemD <font color="darkgreen">&quot;Test case for Flow1Dfem&quot;</font>
  <font color="blue">package</font> Medium=<A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Water_WaterIF97OnePhase_ph.html#Modelica.Media.Water.WaterIF97OnePhase_ph"
>Modelica.Media.Water.WaterIF97OnePhase_ph</A>;
  <font color="darkgreen">// number of Nodes</font>
  <font color="blue">parameter </font>Integer Nnodes=20;
  <font color="darkgreen">// total length</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> Lhex=10;
  <font color="darkgreen">// internal diameter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Modelica.SIunits.Diameter</A> Dihex=0.02;
  <font color="darkgreen">// internal radius</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Modelica.SIunits.Radius</A> rhex=Dihex/2;
  <font color="darkgreen">// internal perimeter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> omegahex=Modelica.Constants.pi*Dihex;
  <font color="darkgreen">// internal cross section</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</A> Ahex=Modelica.Constants.pi*rhex^2;
  <font color="darkgreen">// friction coefficient</font>
  <font color="blue">parameter </font>Real Cfhex=0.005;
  <font color="darkgreen">// nominal (and initial) mass flow rate</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> whex=1e-2;
  <font color="darkgreen">// initial pressure</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</A> phex=0.2e5;
  <font color="darkgreen">// initial specific enthalpy </font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> hs=3e6;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1Dfem"
>ThermoPower.Water.Flow1Dfem</A> hex(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium=Medium,
    N=Nnodes,
    L=Lhex,
    omega=omegahex,
    Dhyd=Dihex,
    A=Ahex,
    wnom=whex,
    Cfnom=Cfhex,
    HydraulicCapacitance=2,
    pstartin=phex,
    pstartout=phex,
    alpha=1,
    hstartin=hs,
    hstartout=hs,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.Cfnom,
    initOpt=ThermoPower.Choices.Init.Options.steadyState);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SourceW"
>ThermoPower.Water.SourceW</A> MassFlowRateSource(
    w0=whex,
    h=hs);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SinkP"
>ThermoPower.Water.SinkP</A> FluidSink(
    p0=0,
    R=100,
    h=3e6);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.ValveLin"
>ThermoPower.Water.ValveLin</A> ValveLin1(Kv=1e-7);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A> MassFlowRateStep(
    height=whex/10,
    offset=whex,
    startTime=0.5);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> Constant1;
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.HeatSource1D"
>ThermoPower.Thermal.HeatSource1D</A> HeatSource1D1(
    N=Nnodes,
    L=Lhex,
    omega=omegahex);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> ExtPower(k=0);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensP"
>Water.SensP</A> SensP;
<font color="blue">equation </font>
  <font color="red">connect</font>(ValveLin1.inlet, hex.outfl);
  <font color="red">connect</font>(ValveLin1.outlet, FluidSink.flange);
  <font color="red">connect</font>(MassFlowRateSource.flange, hex.infl);
  <font color="red">connect</font>(HeatSource1D1.wall, hex.wall);
<font color="blue">initial </font><font color="blue">equation </font>
  <font color="red">der</font>(hex.p) = 0;
  <font color="red">der</font>(hex.h) =<font color="red"> zeros</font>(hex.N);
<font color="blue">equation </font>
  <font color="red">connect</font>(SensP.flange, ValveLin1.inlet);
  <font color="red">connect</font>(MassFlowRateStep.y, MassFlowRateSource.in_w0);
  <font color="red">connect</font>(ExtPower.y, HeatSource1D1.power);
  <font color="red">connect</font>(Constant1.y, ValveLin1.cmd);
<font color="blue">end </font>TestFlow1DfemD;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestFlow1DfemE<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DfemE"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestFlow1DfemE</H2>
<B>Test case for Flow1Dfem</B><p>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DfemED.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DfemE">
<H3>Information</H3>
<PRE></pre>
<p>The model is designed to test the component  <tt>Flow1Dfem</tt> (fluid side of a heat exchanger, finite element method).<br>
This model represent the two fluid sides of a heat exchanger in counterflow configuration. The operating fluid is liquid water.<br>
The mass flow rate during the experiment and initial conditions are the same for the two sides. <br>
During the simulation, the inlet specific enthalpy for hexA ("hot side") is changed:
<ul>
    <li>t=50 s, Step variation of the specific enthalpy of the fluid entering hexA .</li>
</ul>
The outlet temperature of the hot side starts changing after the fluid transport time delay, while the outlet temperature of the cold side starts changing immediately.
</p>
</p>
<p>
Simulation Interval = [0...900] sec <br>
Integration Algorithm = DASSL <br>
Algorithm Tolerance = 1e-6
</p>
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>Nnodes</TD><TD>21</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Lhex</TD><TD>200</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>Dihex</TD><TD>0.02</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A></TD><TD>rhex</TD><TD>Dihex/2</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omegahex</TD><TD>Modelica.Constants.pi*Dihex</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>Ahex</TD><TD>Modelica.Constants.pi*rhex^2</TD><TD>[m2]</TD></TR>
<TR><TD>Real</TD><TD>Cfhex</TD><TD>0.005</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>whex</TD><TD>0.31</TD><TD>[kg/s]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>phex</TD><TD>3e5</TD><TD>[Pa]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>hinhex</TD><TD>1e5</TD><TD>[J/kg]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>houthex</TD><TD>1e5</TD><TD>[J/kg]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestFlow1DfemE <font color="darkgreen">&quot;Test case for Flow1Dfem&quot;</font>
  <font color="blue">package</font> Medium=<A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Water_WaterIF97OnePhase_ph.html#Modelica.Media.Water.WaterIF97OnePhase_ph"
>Modelica.Media.Water.WaterIF97OnePhase_ph</A>;
  <font color="darkgreen">// number of Nodes</font>
  <font color="blue">parameter </font>Integer Nnodes=21;
  <font color="darkgreen">// total length</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> Lhex=200;
  <font color="darkgreen">// internal diameter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Modelica.SIunits.Diameter</A> Dihex=0.02;
  <font color="darkgreen">// internal radius</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Modelica.SIunits.Radius</A> rhex=Dihex/2;
  <font color="darkgreen">// internal perimeter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> omegahex=Modelica.Constants.pi*Dihex;
  <font color="darkgreen">// internal cross section</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</A> Ahex=Modelica.Constants.pi*rhex^2;
  <font color="darkgreen">// friction coefficient</font>
  <font color="blue">parameter </font>Real Cfhex=0.005;
  <font color="darkgreen">// nominal (and initial) mass flow rate</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> whex=0.31;
  <font color="darkgreen">// initial pressure</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</A> phex=3e5;
  <font color="darkgreen">// initial inlet specific enthalpy </font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> hinhex=1e5;
  <font color="darkgreen">// initial outlet specific enthalpy </font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> houthex=1e5;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1Dfem"
>ThermoPower.Water.Flow1Dfem</A> hexA(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium=Medium,
    N=Nnodes,
    Nt=1,
    L=Lhex,
    omega=omegahex,
    Dhyd=Dihex,
    A=Ahex,
    wnom=whex,
    Cfnom=Cfhex,
    HydraulicCapacitance=2,
    hstartin=hinhex,
    hstartout=houthex,
    pstartin=phex,
    pstartout=phex,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.Cfnom,
    initOpt=ThermoPower.Choices.Init.Options.steadyState);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SinkP"
>ThermoPower.Water.SinkP</A> SideA_FluidSink;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SinkP"
>ThermoPower.Water.SinkP</A> SideB_FluidSink;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SourceW"
>ThermoPower.Water.SourceW</A> SideA_MassFlowRate(
    w0=whex,
    p0=3e5);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.ValveLin"
>ThermoPower.Water.ValveLin</A> ValveLin1(Kv=whex/(2e5));
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.ValveLin"
>ThermoPower.Water.ValveLin</A> ValveLin2(Kv=whex/(2e5));
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1Dfem"
>ThermoPower.Water.Flow1Dfem</A> hexB(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium=Medium,
    N=Nnodes,
    L=Lhex,
    omega=omegahex,
    Dhyd=Dihex,
    A=Ahex,
    wnom=whex,
    Cfnom=Cfhex,
    HydraulicCapacitance=2,
    hstartin=hinhex,
    hstartout=houthex,
    pstartin=phex,
    pstartout=phex,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.Cfnom,
    initOpt=ThermoPower.Choices.Init.Options.steadyState);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> SensT_A_in(<font color="blue">redeclare </font><font color="blue">package</font> Medium=Medium);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A> SideA_InSpecEnth(
    height=1e5,
    offset=1e5,
    startTime=50);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> Constant1;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> Constant2;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> SensT_B_in(<font color="blue">redeclare </font><font color="blue">package</font> Medium=Medium);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SourceW"
>ThermoPower.Water.SourceW</A> SideB_MassFlowRate(w0=whex, p0=3e5);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.ConvHT"
>ThermoPower.Thermal.ConvHT</A> ConvExCF(N=Nnodes, gamma=400);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> SensT_A_out(<font color="blue">redeclare </font><font color="blue">package</font> Medium=Medium);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> SensT_B_out(<font color="blue">redeclare </font><font color="blue">package</font> Medium=Medium);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.CounterCurrent"
>Thermal.CounterCurrent</A> CounterCurrent1(N=Nnodes);
<font color="blue">equation </font>
  <font color="red">connect</font>(SideA_MassFlowRate.flange, SensT_A_in.inlet);
  <font color="red">connect</font>(SensT_A_in.outlet, hexA.infl);
  <font color="red">connect</font>(hexA.outfl, ValveLin1.inlet);
  <font color="red">connect</font>(ValveLin2.inlet, hexB.outfl);
  <font color="red">connect</font>(SensT_B_in.outlet, hexB.infl);
  <font color="red">connect</font>(SideB_MassFlowRate.flange, SensT_B_in.inlet);
  <font color="red">connect</font>(ValveLin1.outlet, SensT_A_out.inlet);
  <font color="red">connect</font>(SensT_A_out.outlet, SideA_FluidSink.flange);
  <font color="red">connect</font>(SideB_FluidSink.flange, SensT_B_out.outlet);
  <font color="red">connect</font>(SensT_B_out.inlet, ValveLin2.outlet);
  <font color="red">connect</font>(ConvExCF.side2, hexA.wall);
  <font color="red">connect</font>(hexB.wall, CounterCurrent1.side1);
  <font color="red">connect</font>(CounterCurrent1.side2, ConvExCF.side1);
  <font color="red">connect</font>(SideA_InSpecEnth.y, SideA_MassFlowRate.in_h);
  <font color="red">connect</font>(Constant1.y, ValveLin2.cmd);
  <font color="red">connect</font>(Constant2.y, ValveLin1.cmd);
<font color="blue">end </font>TestFlow1DfemE;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestFlow1DfemF<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DfemF"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestFlow1DfemF</H2>
<B>Test case for Flow1Dfem</B><p>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DfemFD.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestFlow1DfemF">
<H3>Information</H3>
<PRE></pre>
<p>The model is designed to test the component  <tt>Flow1Dfem</tt> (fluid side of a heat exchanger, finite element method).<br>
This model represent the two fluid sides of a heat exchanger in counterflow configuration. The two sides are divided by a metal wall. The operating fluid is liquid water. The mass flow rate during the experiment and initial conditions are the same for the two sides. <br>
During the simulation, the inlet specific enthalpy for hexA ("hot side") is changed:
<ul>
    <li>t=50 s, Step variation of the specific enthalpy of the fluid entering hexA .</li>
</ul>
The outlet temperature of the hot side changes after the fluid transport time delay and the first order delay due to the wall's thermal inertia. The outlet temperature of the cold side starts changing after the thermal inertia delay. </p>
<p>
Simulation Interval = [0...900] sec <br>
Integration Algorithm = DASSL <br>
Algorithm Tolerance = 1e-6
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>Nnodes</TD><TD>20</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Lhex</TD><TD>200</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>Dihex</TD><TD>0.02</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A></TD><TD>rhex</TD><TD>Dihex/2</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omegahex</TD><TD>Modelica.Constants.pi*Dihex</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>Ahex</TD><TD>Modelica.Constants.pi*rhex^2</TD><TD>[m2]</TD></TR>
<TR><TD>Real</TD><TD>Cfhex</TD><TD>0.005</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>whex</TD><TD>0.31</TD><TD>[kg/s]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>phex</TD><TD>3e5</TD><TD>[Pa]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>hinhex</TD><TD>1e5</TD><TD>[J/kg]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>houthex</TD><TD>1e5</TD><TD>[J/kg]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestFlow1DfemF <font color="darkgreen">&quot;Test case for Flow1Dfem&quot;</font>
  <font color="blue">package</font> Medium=<A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Water_WaterIF97OnePhase_ph.html#Modelica.Media.Water.WaterIF97OnePhase_ph"
>Modelica.Media.Water.WaterIF97OnePhase_ph</A>;
  <font color="darkgreen">// number of Nodes</font>
  <font color="blue">parameter </font>Integer Nnodes=20;
  <font color="darkgreen">// total length</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> Lhex=200;
  <font color="darkgreen">// internal diameter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Modelica.SIunits.Diameter</A> Dihex=0.02;
  <font color="darkgreen">// internal radius</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Modelica.SIunits.Radius</A> rhex=Dihex/2;
  <font color="darkgreen">// internal perimeter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> omegahex=Modelica.Constants.pi*Dihex;
  <font color="darkgreen">// internal cross section</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</A> Ahex=Modelica.Constants.pi*rhex^2;
  <font color="darkgreen">// friction coefficient</font>
  <font color="blue">parameter </font>Real Cfhex=0.005;
  <font color="darkgreen">// nominal (and initial) mass flow rate</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> whex=0.31;
  <font color="darkgreen">// initial pressure</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</A> phex=3e5;
  <font color="darkgreen">// initial inlet specific enthalpy </font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> hinhex=1e5;
  <font color="darkgreen">// initial outlet specific enthalpy </font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> houthex=1e5;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1Dfem"
>ThermoPower.Water.Flow1Dfem</A> hexA(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium=Medium,
    N=Nnodes,
    Nt=1,
    L=Lhex,
    omega=omegahex,
    Dhyd=Dihex,
    A=Ahex,
    wnom=whex,
    Cfnom=Cfhex,
    HydraulicCapacitance=2,
    hstartin=hinhex,
    hstartout=houthex,
    pstartin=phex,
    pstartout=phex,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.Cfnom,
    initOpt=ThermoPower.Choices.Init.Options.steadyState);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.ConvHT"
>ThermoPower.Thermal.ConvHT</A> ConvHTc1(N=Nnodes, gamma=400);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.ConvHT"
>ThermoPower.Thermal.ConvHT</A> ConvHTe1(N=Nnodes, gamma=400);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SinkP"
>ThermoPower.Water.SinkP</A> SideA_FluidSink;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SinkP"
>ThermoPower.Water.SinkP</A> SideB_FluidSink;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SourceW"
>ThermoPower.Water.SourceW</A> SideA_MassFlowRate(
    w0=whex,
    p0=3e5);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.ValveLin"
>ThermoPower.Water.ValveLin</A> ValveLin1(Kv=whex/(2e5));
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.ValveLin"
>ThermoPower.Water.ValveLin</A> ValveLin2(Kv=whex/(2e5));
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1Dfem"
>ThermoPower.Water.Flow1Dfem</A> hexB(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium=Medium,
    N=Nnodes,
    L=Lhex,
    omega=omegahex,
    Dhyd=Dihex,
    A=Ahex,
    wnom=whex,
    Cfnom=Cfhex,
    HydraulicCapacitance=2,
    hstartin=hinhex,
    hstartout=houthex,
    pstartin=phex,
    pstartout=phex,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.Cfnom,
    initOpt=ThermoPower.Choices.Init.Options.steadyState);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.MetalTube"
>ThermoPower.Thermal.MetalTube</A> MetalWall(
    N=Nnodes,
    L=Lhex,
    lambda=20,
    rint=rhex,
    rext=rhex + 1e-3,
    rhomcm=4.9e6,
    Tstart1=297,
    TstartN=297,
    initOpt=ThermoPower.Choices.Init.Options.steadyState);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> SensT_A_in(<font color="blue">redeclare </font><font color="blue">package</font> Medium=Medium);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A> SideA_InSpecEnth(
    height=1e5,
    offset=1e5,
    startTime=50);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> Constant1;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> Constant2;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> SensT_B_in(<font color="blue">redeclare </font><font color="blue">package</font> Medium=Medium);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SourceW"
>ThermoPower.Water.SourceW</A> SourceW1(w0=whex, p0=3e5);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> SensT_A_out(<font color="blue">redeclare </font><font color="blue">package</font> Medium=Medium);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SensT"
>ThermoPower.Water.SensT</A> SensT_B_out(<font color="blue">redeclare </font><font color="blue">package</font> Medium=Medium);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.CounterCurrent"
>Thermal.CounterCurrent</A> CounterCurrent1(N=Nnodes);
<font color="blue">equation </font>
  <font color="red">connect</font>(SideA_MassFlowRate.flange, SensT_A_in.inlet);
  <font color="red">connect</font>(SensT_A_in.outlet, hexA.infl);
  <font color="red">connect</font>(hexA.outfl, ValveLin1.inlet);
  <font color="red">connect</font>(ValveLin2.inlet, hexB.outfl);
  <font color="red">connect</font>(ConvHTc1.side1, hexB.wall);
  <font color="red">connect</font>(hexA.wall, ConvHTe1.side2);
  <font color="red">connect</font>(SensT_B_in.outlet, hexB.infl);
  <font color="red">connect</font>(SourceW1.flange, SensT_B_in.inlet);
  <font color="red">connect</font>(MetalWall.int, ConvHTe1.side1);
  <font color="red">connect</font>(SensT_A_out.inlet, ValveLin1.outlet);
  <font color="red">connect</font>(SensT_A_out.outlet, SideA_FluidSink.flange);
  <font color="red">connect</font>(SensT_B_out.outlet, SideB_FluidSink.flange);
  <font color="red">connect</font>(SensT_B_out.inlet, ValveLin2.outlet);
  <font color="red">connect</font>(ConvHTc1.side2, CounterCurrent1.side1);
  <font color="red">connect</font>(CounterCurrent1.side2, MetalWall.ext);
  <font color="red">connect</font>(SideA_InSpecEnth.y, SideA_MassFlowRate.in_h);
  <font color="red">connect</font>(Constant2.y, ValveLin1.cmd);
  <font color="red">connect</font>(Constant1.y, ValveLin2.cmd);
<font color="blue">end </font>TestFlow1DfemF;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestFlow1D2phA<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phA"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestFlow1D2phA</H2>
<B>Test case for Flow1D2ph</B><p>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phAD.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phA">
<H3>Information</H3>
<PRE></pre>
<p>The model is designed to test the component  <tt>Flow1D2ph</tt> when used as an evaporator.<br>
This model represent the fluid side of a once-through boiler with an applied external heat flow. The operating fluid is water.<br>
During the simulation, the inlet specific enthalpy and heat flux are changed, while maintaining the inlet flowrate constant:
<ul>
    <li>t=0 s. The initial state of the water is subcooled liquid.
    <li>t=10 s. Ramp increase of the applied heat flow. The water starts boiling and is blown out of the outlet, whose pressure and flowrate undergo a transient increase. At the end of the transient the outlet fluid is in superheated vapour state.</li>
    <li>t=100 s. Step increase of the inlet enthalpy</li>
    <li>t=150 s. The heat flow is brought back to zero. The vapour collapses, causing a suddend decrease in the outlet pressure and flowrate, until the liquid fills again the entire boiler. At that instant, the flowrate rises again rapidly to the inlet values.</li>
</ul>
<p>
Simulation Interval = [0...250] sec <br>
Integration Algorithm = DASSL <br>
Algorithm Tolerance = 1e-9
</p>
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>Nnodes</TD><TD>10</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Lhex</TD><TD>10</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>Dhex</TD><TD>0.06</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Thickness"
>Thickness</A></TD><TD>thhex</TD><TD>0</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A></TD><TD>rhex</TD><TD>Dhex/2</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omegahex</TD><TD>Dhex</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>Ahex</TD><TD>pi*rhex^2</TD><TD>[m2]</TD></TR>
<TR><TD>Real</TD><TD>Cfhex</TD><TD>0.005</TD><TD>&nbsp;</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestFlow1D2phA <font color="darkgreen">&quot;Test case for Flow1D2ph&quot;</font>
  <font color="blue">package</font> Medium=<A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Water_WaterIF97_ph.html#Modelica.Media.Water.WaterIF97_ph"
>Modelica.Media.Water.WaterIF97_ph</A>;
  <font color="blue">import </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Constants.html#Modelica.Constants"
>Modelica.Constants</A>.*;
  <font color="darkgreen">// number of Nodes</font>
  <font color="blue">parameter </font>Integer Nnodes=10;
  <font color="darkgreen">// total length</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A> Lhex=10;
  <font color="darkgreen">// internal diameter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A> Dhex=0.06;
  <font color="darkgreen">// wall thickness</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Thickness"
>Thickness</A> thhex=0;
  <font color="darkgreen">// internal radius</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A> rhex=Dhex/2;
  <font color="darkgreen">// internal perimeter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A> omegahex=Dhex;
  <font color="darkgreen">// internal cross section</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A> Ahex=pi*rhex^2;
  <font color="darkgreen">// friction factor</font>
  <font color="blue">parameter </font>Real Cfhex=0.005;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Modelica.SIunits.Mass</A> Mhex <font color="darkgreen">&quot;Mass in the heat exchanger&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Modelica.SIunits.Mass</A> Mbal <font color="darkgreen">&quot;Mass resulting from the mass balance&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Modelica.SIunits.Mass</A> Merr <font color="darkgreen">&quot;Mass balance error&quot;</font>;

  <A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1D2ph"
>ThermoPower.Water.Flow1D2ph</A> hex(
    N=Nnodes,
    L=Lhex,
    omega=omegahex,
    Dhyd=Dhex,
    A=Ahex,
    Cfnom=0.005,
    hstartin=6e5,
    hstartout=6e5,
    pstartin=10e5,
    pstartout=10e5,
    wnom=1,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.Cfnom,
    initOpt=ThermoPower.Choices.Init.Options.steadyState,
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.ValveLin"
>ThermoPower.Water.ValveLin</A> valve(           <font color="blue">redeclare </font><font color="blue">package</font> Medium =
        Medium, Kv=0.4/10e5);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.HeatSource1D"
>ThermoPower.Thermal.HeatSource1D</A> heatSource(
    N=Nnodes,
    L=Lhex,
    omega=omegahex);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SinkP"
>ThermoPower.Water.SinkP</A> Sink(p0=1e5, <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> hIn(
    height=1e5,
    offset=4e5,
    startTime=100,
    duration=2);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> extPower(
    startTime=10,
    duration=50,
    height=12e5);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SourceW"
>ThermoPower.Water.SourceW</A> Source(      <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium, w0=
       0.4);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> extPower2(
    duration=10,
    startTime=150,
    height=-12e5);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Add"
>Modelica.Blocks.Math.Add</A> Add1;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> xValve(height=0, offset=1);
<font color="blue">equation </font>
  <font color="red">connect</font>(heatSource.wall, hex.wall);
  <font color="red">connect</font>(hex.outfl, valve.inlet);
  <font color="red">connect</font>(valve.outlet, Sink.flange);
  <font color="red">connect</font>(Source.flange, hex.infl);
  Mhex = hex.M;
  <font color="red">der</font>(Mbal) = hex.infl.w + hex.outfl.w;
  Merr = Mhex-Mbal;
<font color="blue">initial </font><font color="blue">equation </font>
  Mbal = Mhex;

<font color="blue">equation </font>
  <font color="red">connect</font>(hIn.y, Source.in_h);
  <font color="red">connect</font>(xValve.y, valve.cmd);
  <font color="red">connect</font>(Add1.y, heatSource.power);
  <font color="red">connect</font>(extPower.y, Add1.u2);
  <font color="red">connect</font>(extPower2.y, Add1.u1);
<font color="blue">end </font>TestFlow1D2phA;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestFlow1D2phB<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phB"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestFlow1D2phB</H2>
<B>Test case for Flow1D2ph</B><p>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phBD.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phB">
<H3>Information</H3>
<PRE></pre>
<p>Same as TestFlow1D2phA, but in this case the enthalpy at the inlet changes stepwise. The avodInletEnthalpyDerivative flag is set to true, in order to avoid problems with the derivative of h[1].
<p>
Simulation Interval = [0...250] sec <br>
Integration Algorithm = DASSL <br>
Algorithm Tolerance = 1e-9
</p>
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>Nnodes</TD><TD>10</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Lhex</TD><TD>10</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>Dhex</TD><TD>0.06</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Thickness"
>Thickness</A></TD><TD>thhex</TD><TD>0</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A></TD><TD>rhex</TD><TD>Dhex/2</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omegahex</TD><TD>Dhex</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>Ahex</TD><TD>pi*rhex^2</TD><TD>[m2]</TD></TR>
<TR><TD>Real</TD><TD>Cfhex</TD><TD>0.005</TD><TD>&nbsp;</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestFlow1D2phB <font color="darkgreen">&quot;Test case for Flow1D2ph&quot;</font>
  <font color="blue">package</font> Medium=<A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Water_WaterIF97_ph.html#Modelica.Media.Water.WaterIF97_ph"
>Modelica.Media.Water.WaterIF97_ph</A>;
  <font color="blue">import </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Constants.html#Modelica.Constants"
>Modelica.Constants</A>.*;
  <font color="darkgreen">// number of Nodes</font>
  <font color="blue">parameter </font>Integer Nnodes=10;
  <font color="darkgreen">// total length</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A> Lhex=10;
  <font color="darkgreen">// internal diameter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A> Dhex=0.06;
  <font color="darkgreen">// wall thickness</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Thickness"
>Thickness</A> thhex=0;
  <font color="darkgreen">// internal radius</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A> rhex=Dhex/2;
  <font color="darkgreen">// internal perimeter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A> omegahex=Dhex;
  <font color="darkgreen">// internal cross section</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A> Ahex=pi*rhex^2;
  <font color="darkgreen">// friction factor</font>
  <font color="blue">parameter </font>Real Cfhex=0.005;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Modelica.SIunits.Mass</A> Mhex <font color="darkgreen">&quot;Mass in the heat exchanger&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Modelica.SIunits.Mass</A> Mbal <font color="darkgreen">&quot;Mass resulting from the mass balance&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Modelica.SIunits.Mass</A> Merr <font color="darkgreen">&quot;Mass balance error&quot;</font>;

  <A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1D2ph"
>ThermoPower.Water.Flow1D2ph</A> hex(
    N=Nnodes,
    L=Lhex,
    omega=omegahex,
    Dhyd=Dhex,
    A=Ahex,
    Cfnom=0.005,
    DynamicMomentum=false,
    hstartin=6e5,
    hstartout=6e5,
    pstartin=10e5,
    pstartout=10e5,
    wnom=1,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.Cfnom,
    initOpt=ThermoPower.Choices.Init.Options.steadyState,
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    avoidInletEnthalpyDerivative=true);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.ValveLin"
>ThermoPower.Water.ValveLin</A> valve(           <font color="blue">redeclare </font><font color="blue">package</font> Medium =
        Medium, Kv=0.4/10e5);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.HeatSource1D"
>ThermoPower.Thermal.HeatSource1D</A> heatSource(
    N=Nnodes,
    L=Lhex,
    omega=omegahex);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SinkP"
>ThermoPower.Water.SinkP</A> Sink(p0=1e5, <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A> hIn(
    height=1e5,
    offset=4e5,
    startTime=100);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> extPower(
    startTime=10,
    duration=50,
    height=12e5);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SourceW"
>ThermoPower.Water.SourceW</A> Source(      <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium, w0=
       0.4);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> extPower2(
    duration=10,
    startTime=150,
    height=-12e5);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Add"
>Modelica.Blocks.Math.Add</A> Add1;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> xValve(height=0, offset=1);
<font color="blue">equation </font>
  <font color="red">connect</font>(heatSource.wall, hex.wall);
  <font color="red">connect</font>(hex.outfl, valve.inlet);
  <font color="red">connect</font>(valve.outlet, Sink.flange);
  <font color="red">connect</font>(Source.flange, hex.infl);
  Mhex = hex.M;
  <font color="red">der</font>(Mbal) = hex.infl.w + hex.outfl.w;
  Merr = Mhex-Mbal;
<font color="blue">initial </font><font color="blue">equation </font>
  Mbal = Mhex;
<font color="blue">equation </font>
  <font color="red">connect</font>(extPower2.y, Add1.u1);
  <font color="red">connect</font>(extPower.y, Add1.u2);
  <font color="red">connect</font>(Add1.y, heatSource.power);
  <font color="red">connect</font>(hIn.y, Source.in_h);
  <font color="red">connect</font>(xValve.y, valve.cmd);
<font color="blue">end </font>TestFlow1D2phB;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestFlow1D2phC<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phC"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestFlow1D2phC</H2>
<B>Test case for Flow1D2ph</B><p>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phCD.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phC">
<H3>Information</H3>
<PRE></pre>
<p>The model is designed to test the component  <tt>Flow1D2ph</tt> when used as an evaporator.<br>
This model represent the fluid side of a once-through boiler with an applied external heat flow. The operating fluid is water. The outlet pressure is kept constant, emulating perfect pressure control.<br>
During the simulation, the inlet specific enthalpy and heat flux are changed, while maintaining the inlet flowrate constant:
<ul>
    <li>t=0 s. The initial state of the water is subcooled liquid.
    <li>t=10 s. Ramp increase of the applied heat flow. The water starts boiling and is blown out of the outlet, whose flowrate undergo a transient increase. At the end of the transient the outlet fluid is in superheated vapour state.</li>
    <li>t=100 s. Step increase of the inlet enthalpy</li>
    <li>t=150 s. The heat flow is brought back to zero. The vapour collapses, causing a suddend decrease in the outlet flowrate, until the liquid fills again the entire boiler. At that instant, the flowrate rises again rapidly to the inlet values.</li>
</ul>
<p>
Simulation Interval = [0...250] sec <br>
Integration Algorithm = DASSL <br>
Algorithm Tolerance = 1e-9
</p>
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>Nnodes</TD><TD>20</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Lhex</TD><TD>10</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>Dhex</TD><TD>0.06</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Thickness"
>Thickness</A></TD><TD>thhex</TD><TD>0</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A></TD><TD>rhex</TD><TD>Dhex/2</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omegahex</TD><TD>Dhex</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>Ahex</TD><TD>pi*rhex^2</TD><TD>[m2]</TD></TR>
<TR><TD>Real</TD><TD>Cfhex</TD><TD>0.005</TD><TD>&nbsp;</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestFlow1D2phC <font color="darkgreen">&quot;Test case for Flow1D2ph&quot;</font>
  <font color="blue">package</font> Medium=<A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Water_WaterIF97_ph.html#Modelica.Media.Water.WaterIF97_ph"
>Modelica.Media.Water.WaterIF97_ph</A>;
  <font color="blue">import </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Constants.html#Modelica.Constants"
>Modelica.Constants</A>.*;
  <font color="darkgreen">// number of Nodes</font>
  <font color="blue">parameter </font>Integer Nnodes=20;
  <font color="darkgreen">// total length</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A> Lhex=10;
  <font color="darkgreen">// internal diameter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A> Dhex=0.06;
  <font color="darkgreen">// wall thickness</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Thickness"
>Thickness</A> thhex=0;
  <font color="darkgreen">// internal radius</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A> rhex=Dhex/2;
  <font color="darkgreen">// internal perimeter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A> omegahex=Dhex;
  <font color="darkgreen">// internal cross section</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A> Ahex=pi*rhex^2;
  <font color="darkgreen">// friction factor</font>
  <font color="blue">parameter </font>Real Cfhex=0.005;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Modelica.SIunits.Mass</A> Mhex <font color="darkgreen">&quot;Mass in the heat exchanger&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Modelica.SIunits.Mass</A> Mbal <font color="darkgreen">&quot;Mass resulting from the mass balance&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Modelica.SIunits.Mass</A> Merr <font color="darkgreen">&quot;Mass balance error&quot;</font>;

  <A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1D2ph"
>ThermoPower.Water.Flow1D2ph</A> hex(
    N=Nnodes,
    L=Lhex,
    omega=omegahex,
    Dhyd=Dhex,
    A=Ahex,
    Cfnom=0.005,
    DynamicMomentum=false,
    pstartin=10e5,
    pstartout=10e5,
    wnom=1,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.Cfnom,
    initOpt=ThermoPower.Choices.Init.Options.steadyState,
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    hstartin=6e5,
    hstartout=6e5);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.HeatSource1D"
>ThermoPower.Thermal.HeatSource1D</A> heatSource(
    N=Nnodes,
    L=Lhex,
    omega=omegahex);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SinkP"
>ThermoPower.Water.SinkP</A> Sink(        <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium, p0=
        11e5);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> hIn(
    height=1e5,
    offset=4e5,
    duration=2,
    startTime=100);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> extPower(
    startTime=10,
    duration=50,
    height=12e5);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SourceW"
>ThermoPower.Water.SourceW</A> Source(      <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium, w0=
       0.4);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> extPower2(
    startTime=150,
    height=-12e5,
    duration=50);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Add"
>Modelica.Blocks.Math.Add</A> Add1;
<font color="blue">equation </font>
  <font color="red">connect</font>(heatSource.wall, hex.wall);
  <font color="red">connect</font>(Source.flange, hex.infl);
  Mhex = hex.M;
  <font color="red">der</font>(Mbal) = hex.infl.w + hex.outfl.w;
  Merr = Mhex-Mbal;
<font color="blue">initial </font><font color="blue">equation </font>
  Mbal = Mhex;

<font color="blue">equation </font>
  <font color="red">connect</font>(hex.outfl, Sink.flange);
  <font color="red">connect</font>(extPower.y, Add1.u2);
  <font color="red">connect</font>(extPower2.y, Add1.u1);
  <font color="red">connect</font>(Add1.y, heatSource.power);
  <font color="red">connect</font>(hIn.y, Source.in_h);
<font color="blue">end </font>TestFlow1D2phC;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestFlow1D2phD<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phD"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestFlow1D2phD</H2>
<B>Test case for Flow1D2ph</B><p>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phDD.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phD">
<H3>Information</H3>
<PRE></pre>
<p>The model is designed to test the component  <tt>Flow1D2ph</tt> when used as a condenser.<br>
This model represent the fluid side of a condenser with an applied external heat flow. The operating fluid is water.<br>
During the simulation, the inlet specific enthalpy and heat flux are changed, while maintaining the inlet flowrate constant:
<ul>
    <li>t=0 s. The initial state of the water is superheated vapour.
    <li>t=10 s. Ramp increase of the heat flow extracted from the component. The steam condenses, causing a reduction of pressure and a flow rate transient decrease. At the end of the transient the outlet fluid is in subcooled liquid state.</li>
    <li>t=300 s. Step increase of the inlet enthalpy</li>
    <li>t=400 s. The heat flow is brought back to zero. The fluids evaporates, causing an increase of pressure and a surge of flow rate at the outlet..</li>
</ul>
<p>
Simulation Interval = [0...600] sec <br>
Integration Algorithm = DASSL <br>
Algorithm Tolerance = 1e-9
</p>
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>Nnodes</TD><TD>10</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Lhex</TD><TD>10</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>Dhex</TD><TD>0.06</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Thickness"
>Thickness</A></TD><TD>thhex</TD><TD>0</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A></TD><TD>rhex</TD><TD>Dhex/2</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omegahex</TD><TD>Dhex</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>Ahex</TD><TD>pi*rhex^2</TD><TD>[m2]</TD></TR>
<TR><TD>Real</TD><TD>Cfhex</TD><TD>0.005</TD><TD>&nbsp;</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestFlow1D2phD <font color="darkgreen">&quot;Test case for Flow1D2ph&quot;</font>
  <font color="blue">package</font> Medium=<A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Water_WaterIF97_ph.html#Modelica.Media.Water.WaterIF97_ph"
>Modelica.Media.Water.WaterIF97_ph</A>;
  <font color="blue">import </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Constants.html#Modelica.Constants"
>Modelica.Constants</A>.*;
  <font color="darkgreen">// number of Nodes</font>
  <font color="blue">parameter </font>Integer Nnodes=10;
  <font color="darkgreen">// total length</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A> Lhex=10;
  <font color="darkgreen">// internal diameter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A> Dhex=0.06;
  <font color="darkgreen">// wall thickness</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Thickness"
>Thickness</A> thhex=0;
  <font color="darkgreen">// internal radius</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A> rhex=Dhex/2;
  <font color="darkgreen">// internal perimeter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A> omegahex=Dhex;
  <font color="darkgreen">// internal cross section</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A> Ahex=pi*rhex^2;
  <font color="darkgreen">// friction factor</font>
  <font color="blue">parameter </font>Real Cfhex=0.005;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Modelica.SIunits.Mass</A> Mhex <font color="darkgreen">&quot;Mass in the heat exchanger&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Modelica.SIunits.Mass</A> Mbal <font color="darkgreen">&quot;Mass resulting from the mass balance&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Modelica.SIunits.Mass</A> Merr <font color="darkgreen">&quot;Mass balance error&quot;</font>;

  <A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1D2ph"
>Water.Flow1D2ph</A> hex(
    N=Nnodes,
    L=Lhex,
    omega=omegahex,
    Dhyd=Dhex,
    A=Ahex,
    Cfnom=0.005,
    DynamicMomentum=false,
    pstartin=10e5,
    pstartout=10e5,
    wnom=1,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.Cfnom,
    initOpt=ThermoPower.Choices.Init.Options.steadyState,
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    hstartin=3.2e6,
    hstartout=3.26e6);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.ValveLin"
>ThermoPower.Water.ValveLin</A> valve(           <font color="blue">redeclare </font><font color="blue">package</font> Medium =
        Medium, Kv=0.2/10e5);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.HeatSource1D"
>ThermoPower.Thermal.HeatSource1D</A> heatSource(
    N=Nnodes,
    L=Lhex,
    omega=omegahex);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SinkP"
>ThermoPower.Water.SinkP</A> Sink(p0=1e5, <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> hIn(
    height=1e5,
    duration=2,
    offset=3.2e6,
    startTime=300);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> extPower(
    startTime=10,
    height=-6e5,
    duration=200);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SourceW"
>ThermoPower.Water.SourceW</A> Source(      <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium, w0=
       0.2);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> extPower2(
    duration=150,
    height=+6e5,
    startTime=400);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Add"
>Modelica.Blocks.Math.Add</A> Add1;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> xValve(height=0, offset=1);
<font color="blue">equation </font>
  <font color="red">connect</font>(heatSource.wall, hex.wall);
  <font color="red">connect</font>(hex.outfl, valve.inlet);
  <font color="red">connect</font>(valve.outlet, Sink.flange);
  <font color="red">connect</font>(Source.flange, hex.infl);
  Mhex = hex.M;
  <font color="red">der</font>(Mbal) = hex.infl.w + hex.outfl.w;
  Merr = Mhex-Mbal;
<font color="blue">initial </font><font color="blue">equation </font>
  Mbal = Mhex;
<font color="blue">equation </font>
  <font color="red">connect</font>(extPower.y, Add1.u2);
  <font color="red">connect</font>(extPower2.y, Add1.u1);
  <font color="red">connect</font>(hIn.y, Source.in_h);
  <font color="red">connect</font>(Add1.y, heatSource.power);
  <font color="red">connect</font>(xValve.y, valve.cmd);
<font color="blue">end </font>TestFlow1D2phD;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE CheckFlow1D2phMassBalance<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.CheckFlow1D2phMassBalance"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.CheckFlow1D2phMassBalance</H2>
<B>Checks Flow1D2ph equations for mass conservation</B><p>
<H3>Information</H3>
<PRE></pre>
This model checks the dynamic mass balance equations of Flow1D2ph, by prescribing enthalpy and pressure values that will ensure complete coverage of the different cases.
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>N</TD><TD>2</TD><TD>&nbsp;</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> CheckFlow1D2phMassBalance <font color="darkgreen">
  &quot;Checks Flow1D2ph equations for mass conservation&quot;</font>
  <font color="blue">package</font> Medium = ThermoPower.Water.StandardWater;
  <font color="blue">package</font> SmoothMedium=Medium(<font color="blue">final </font>smoothModel = true);
  <font color="blue">parameter </font>Integer N = 2;
  <font color="blue">constant </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</A> pzero=10 <font color="darkgreen">&quot;Small deltap for calculations&quot;</font>;
  <font color="blue">constant </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</A> pc=Medium.fluidConstants[1].criticalPressure;
  <font color="blue">constant </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> hzero=1e-3 <font color="darkgreen">
    &quot;Small value for deltah&quot;</font>;
  SmoothMedium.BaseProperties fluid[N] <font color="darkgreen">&quot;Properties of the fluid at the nodes&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Interfaces_PartialTwoPhaseMedium.html#Modelica.Media.Interfaces.PartialTwoPhaseMedium.SaturationProperties"
>Medium.SaturationProperties</A> sat <font color="darkgreen">&quot;Properties of saturated fluid&quot;</font>;
  Medium.ThermodynamicState dew <font color="darkgreen">&quot;Thermodynamic state at dewpoint&quot;</font>;
  Medium.ThermodynamicState bubble <font color="darkgreen">&quot;Thermodynamic state at bubblepoint&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>Medium.AbsolutePressure</A> p <font color="darkgreen">&quot;Fluid pressure for property calculations&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature"
>Medium.Temperature</A> T[N] <font color="darkgreen">&quot;Fluid temperature&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature"
>Medium.Temperature</A> Ts <font color="darkgreen">&quot;Saturated water temperature&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.SpecificEnthalpy"
>Medium.SpecificEnthalpy</A> h[N] <font color="darkgreen">&quot;Fluid specific enthalpy&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.SpecificEnthalpy"
>Medium.SpecificEnthalpy</A> hl <font color="darkgreen">&quot;Saturated liquid temperature&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.SpecificEnthalpy"
>Medium.SpecificEnthalpy</A> hv <font color="darkgreen">&quot;Saturated vapour temperature&quot;</font>;
  Real x[N] <font color="darkgreen">&quot;Steam quality&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Density"
>Medium.Density</A> rho[N] <font color="darkgreen">&quot;Fluid density&quot;</font>;
  <A HREF="ThermoPower.html#ThermoPower.LiquidDensity"
>ThermoPower.LiquidDensity</A> rhol <font color="darkgreen">&quot;Saturated liquid density&quot;</font>;
  <A HREF="ThermoPower.html#ThermoPower.GasDensity"
>ThermoPower.GasDensity</A> rhov <font color="darkgreen">&quot;Saturated vapour density&quot;</font>;
<font color="darkgreen">// protected </font>
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.DerEnthalpyByPressure"
>Modelica.SIunits.DerEnthalpyByPressure</A> dhldp <font color="darkgreen">
    &quot;Derivative of saturated liquid enthalpy by pressure&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.DerEnthalpyByPressure"
>Modelica.SIunits.DerEnthalpyByPressure</A> dhvdp <font color="darkgreen">
    &quot;Derivative of saturated vapour enthalpy by pressure&quot;</font>;
  <A HREF="ThermoPower.html#ThermoPower.Density"
>ThermoPower.Density</A> rhobar[N - 1] <font color="darkgreen">&quot;Fluid average density&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.DerDensityByPressure"
>Modelica.SIunits.DerDensityByPressure</A> drdp[N] <font color="darkgreen">
    &quot;Derivative of density by pressure&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.DerDensityByPressure"
>Modelica.SIunits.DerDensityByPressure</A> drbdp[N - 1] <font color="darkgreen">
    &quot;Derivative of average density by pressure&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.DerDensityByPressure"
>Modelica.SIunits.DerDensityByPressure</A> drldp <font color="darkgreen">
    &quot;Derivative of saturated liquid density by pressure&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.DerDensityByPressure"
>Modelica.SIunits.DerDensityByPressure</A> drvdp <font color="darkgreen">
    &quot;Derivative of saturated vapour density by pressure&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.DerDensityByEnthalpy"
>Modelica.SIunits.DerDensityByEnthalpy</A> drdh[N] <font color="darkgreen">
    &quot;Derivative of density by enthalpy&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.DerDensityByEnthalpy"
>Modelica.SIunits.DerDensityByEnthalpy</A> drbdh1[N - 1] <font color="darkgreen">
    &quot;Derivative of average density by left enthalpy&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.DerDensityByEnthalpy"
>Modelica.SIunits.DerDensityByEnthalpy</A> drbdh2[N - 1] <font color="darkgreen">
    &quot;Derivative of average density by right enthalpy&quot;</font>;
  Real AA;
  Real AA1;
  <font color="blue">import </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Math.html#Modelica.Math"
>Modelica.Math</A>.*;
  Real rhobar_check[N-1];
  Real rhobar_err[N-1] = rhobar-rhobar_check;
  Real case[N-1];

<font color="blue">equation </font>
  p = 30e5
      - 10e5*<font color="red">min</font>(1,<font color="red">max</font>(0,time-0))
      + 10e5*<font color="red">min</font>(1,<font color="red">max</font>(0,time-2))
      - 10e5*<font color="red">min</font>(1,<font color="red">max</font>(0,time-4))
      + 10e5*<font color="red">min</font>(1,<font color="red">max</font>(0,time-6))
      - 10e5*<font color="red">min</font>(1,<font color="red">max</font>(0,time-8))
      + 10e5*<font color="red">min</font>(1,<font color="red">max</font>(0,time-10))
      - 10e5*<font color="red">min</font>(1,<font color="red">max</font>(0,time-12))
      + 10e5*<font color="red">min</font>(1,<font color="red">max</font>(0,time-14))
      - 10e5*<font color="red">min</font>(1,<font color="red">max</font>(0,time-16))
      + 10e5*<font color="red">min</font>(1,<font color="red">max</font>(0,time-18))
      - 10e5*<font color="red">min</font>(1,<font color="red">max</font>(0,time-20));
  h[1] = 4e5
         + 14e5*<font color="red">min</font>(1,<font color="red">max</font>(0,time-5))
         + 14e5*<font color="red">min</font>(1,<font color="red">max</font>(0,time-7))
         - 14e5*<font color="red">min</font>(1,<font color="red">max</font>(0,time-13))
         - 14e5*<font color="red">min</font>(1,<font color="red">max</font>(0,time-15))
         + 8e5*<font color="red">min</font>(1,<font color="red">max</font>(0,time-17));
  h[2] = 4e5
         + 14e5*<font color="red">min</font>(1,<font color="red">max</font>(0,time-1))
         + 14e5*<font color="red">min</font>(1,<font color="red">max</font>(0,time-3))
         - 14e5*<font color="red">min</font>(1,<font color="red">max</font>(0,time-9))
         - 14e5*<font color="red">min</font>(1,<font color="red">max</font>(0,time-11))
         + 12e5*<font color="red">min</font>(1,<font color="red">max</font>(0,time-17));
  <font color="blue">for </font>j<font color="blue"> in </font>1:N-1<font color="blue"> loop</font>
    <font color="red">der</font>(rhobar_check[j]) = drbdh1[j]*<font color="red">der</font>(h[j])+drbdh2[j]*<font color="red">der</font>(h[j+1])+drbdp[j]*<font color="red">der</font>(p);
  <font color="blue">end for</font>;
<font color="blue">initial </font><font color="blue">equation </font>
  rhobar_check = rhobar;
<font color="blue">equation </font>
  <font color="blue">for </font>j<font color="blue"> in </font>1:(N - 1)<font color="blue"> loop</font>
    <font color="blue">if </font><font color="red">noEvent</font>((h[j] &lt; hl<font color="blue"> and </font>h[j + 1] &lt; hl)<font color="blue"> or </font>(h[j] &gt; hv<font color="blue"> and </font>h[j + 1] &gt;
        hv)<font color="blue"> or </font>p &gt;= (pc - pzero)<font color="blue"> or </font><font color="red">abs</font>(h[j + 1] - h[j]) &lt; hzero)<font color="blue"> then</font>
      <font color="darkgreen">// 1-phase or almost uniform properties</font>
      rhobar[j] = (rho[j] + rho[j+1])/2;
      drbdp[j] = (drdp[j] + drdp[j+1])/2;
      drbdh1[j] = drdh[j]/2;
      drbdh2[j] = drdh[j+1]/2;
      case[j] = 0;
    <font color="blue">elseif </font><font color="red">noEvent</font>(h[j] &gt;= hl<font color="blue"> and </font>h[j] &lt;= hv<font color="blue"> and </font>h[j + 1] &gt;= hl<font color="blue"> and </font>h[j + 1]
         &lt;= hv)<font color="blue"> then</font>
      <font color="darkgreen">// 2-phase</font>
      rhobar[j] = AA*<font color="red">log</font>(rho[j]/rho[j+1]) / (h[j+1] - h[j]);
      drbdp[j] = (AA1*<font color="red">log</font>(rho[j]/rho[j+1]) +
                  AA*(1/rho[j] * drdp[j] - 1/rho[j+1] * drdp[j+1])) /
                 (h[j+1] - h[j]);
      drbdh1[j] = (rhobar[j] - rho[j]) / (h[j+1] - h[j]);
      drbdh2[j] = (rho[j+1] - rhobar[j]) / (h[j+1] - h[j]);
      case[j] = 1;
    <font color="blue">elseif </font><font color="red">noEvent</font>(h[j] &lt; hl<font color="blue"> and </font>h[j + 1] &gt;= hl<font color="blue"> and </font>h[j + 1] &lt;= hv)<font color="blue"> then</font>
      <font color="darkgreen">// liquid/2-phase</font>
      rhobar[j] = ((rho[j] + rhol)*(hl - h[j])/2 + AA*<font color="red">log</font>(rhol/rho[j+1])) /
                  (h[j+1] - h[j]);
      drbdp[j] = ((drdp[j] + drldp)*(hl - h[j])/2 + (rho[j]+rhol)/2 * dhldp +
                   AA1*<font color="red">log</font>(rhol/rho[j+1]) +
                   AA*(1/rhol * drldp - 1/rho[j+1] * drdp[j+1])) / (h[j+1] - h[j]);
      drbdh1[j] = (rhobar[j] - (rho[j]+rhol)/2 + drdh[j]*(hl-h[j])/2) / (h[j+1] - h[j]);
      drbdh2[j] = (rho[j+1] - rhobar[j]) / (h[j+1] - h[j]);
      case[j] = 2;
    <font color="blue">elseif </font><font color="red">noEvent</font>(h[j] &gt;= hl<font color="blue"> and </font>h[j] &lt;= hv<font color="blue"> and </font>h[j + 1] &gt; hv)<font color="blue"> then</font>
      <font color="darkgreen">// 2-phase/vapour</font>
      rhobar[j] = (AA*<font color="red">log</font>(rho[j]/rhov) + (rhov + rho[j+1])*(h[j+1] - hv)/2) /
                  (h[j+1] - h[j]);
      drbdp[j] = (AA1*<font color="red">log</font>(rho[j]/rhov) +
                  AA*(1/rho[j] * drdp[j] - 1/rhov *drvdp) +
                  (drvdp + drdp[j+1])*(h[j+1] - hv)/2 - (rhov+rho[j+1])/2 * dhvdp) /
                 (h[j + 1] - h[j]);
      drbdh1[j] = (rhobar[j] - rho[j]) / (h[j+1] - h[j]);
      drbdh2[j] = ((rhov+rho[j+1])/2 - rhobar[j] + drdh[j+1]*(h[j+1]-hv)/2) /
                  (h[j+1] - h[j]);
      case[j] = 3;
    <font color="blue">elseif </font><font color="red">noEvent</font>(h[j] &lt; hl<font color="blue"> and </font>h[j + 1] &gt; hv)<font color="blue"> then</font>
      <font color="darkgreen">// liquid/2-phase/vapour</font>
      rhobar[j] = ((rho[j] + rhol)*(hl - h[j])/2 + AA*<font color="red">log</font>(rhol/rhov) +
                   (rhov + rho[j+1])*(h[j+1] - hv)/2) / (h[j+1] - h[j]);
      drbdp[j] = ((drdp[j] + drldp)*(hl - h[j])/2 + (rho[j]+rhol)/2 * dhldp +
                  AA1*<font color="red">log</font>(rhol/rhov) + AA*(1/rhol * drldp - 1/rhov * drvdp) +
                  (drvdp + drdp[j+1])*(h[j+1] - hv)/2 - (rhov+rho[j+1])/2 * dhvdp) /
                 (h[j+1] - h[j]);
      drbdh1[j] = (rhobar[j] - (rho[j]+rhol)/2 + drdh[j]*(hl-h[j])/2) / (h[j+1] - h[j]);
      drbdh2[j] = ((rhov+rho[j+1])/2 - rhobar[j] + drdh[j+1]*(h[j+1]-hv)/2) / (h[j+1] - h[j]);
      case[j] = 4;
    <font color="blue">elseif </font><font color="red">noEvent</font>(h[j] &gt;= hl<font color="blue"> and </font>h[j] &lt;= hv<font color="blue"> and </font>h[j + 1] &lt; hl)<font color="blue"> then</font>
      <font color="darkgreen">// 2-phase/liquid</font>
      rhobar[j] = (AA*<font color="red">log</font>(rho[j]/rhol) + (rhol + rho[j+1])*(h[j+1] - hl)/2) /
                  (h[j+1] - h[j]);
      drbdp[j] = (AA1*<font color="red">log</font>(rho[j]/rhol) +
                  AA*(1/rho[j] * drdp[j] - 1/rhol * drldp) +
                  (drldp + drdp[j+1])*(h[j+1] - hl)/2 - (rhol + rho[j+1])/2 * dhldp) /
                 (h[j + 1] - h[j]);
      drbdh1[j] = (rhobar[j] - rho[j]) / (h[j+1] - h[j]);
      drbdh2[j] = ((rhol+rho[j+1])/2 - rhobar[j] + drdh[j+1]*(h[j+1]-hl)/2) / (h[j+1] - h[j]);
      case[j] = 5;
    <font color="blue">elseif </font><font color="red">noEvent</font>(h[j] &gt; hv<font color="blue"> and </font>h[j + 1] &lt; hl)<font color="blue"> then</font>
      <font color="darkgreen">// vapour/2-phase/liquid</font>
      rhobar[j] = ((rho[j] + rhov)*(hv - h[j])/2 + AA*<font color="red">log</font>(rhov/rhol) +
                   (rhol + rho[j+1])*(h[j+1] - hl)/2) / (h[j+1] - h[j]);
      drbdp[j] = ((drdp[j] + drvdp)*(hv - h[j])/2 + (rho[j]+rhov)/2 * dhvdp +
                  AA1*<font color="red">log</font>(rhov/rhol) +
                  AA*(1/rhov * drvdp - 1/rhol * drldp) +
                  (drldp + drdp[j+1])*(h[j+1] - hl)/2 - (rhol+rho[j+1])/2 * dhldp) /
                 (h[j+1] - h[j]);
      drbdh1[j] = (rhobar[j] - (rho[j]+rhov)/2 + drdh[j]*(hv-h[j])/2) / (h[j+1] - h[j]);
      drbdh2[j] = ((rhol+rho[j+1])/2 - rhobar[j] + drdh[j+1]*(h[j+1]-hl)/2) / (h[j+1] - h[j]);
      case[j] = 6;
    <font color="blue">else</font>
      <font color="darkgreen">// vapour/2-phase</font>
      rhobar[j] = ((rho[j] + rhov)*(hv - h[j])/2 + AA*<font color="red">log</font>(rhov/rho[j+1])) / (h[j+1] - h[j]);
      drbdp[j] = ((drdp[j] + drvdp)*(hv - h[j])/2 + (rho[j]+rhov)/2 * dhvdp +
                  AA1*<font color="red">log</font>(rhov/rho[j+1]) + AA*(1/rhov * drvdp - 1/rho[j+1] * drdp[j+1])) /
                 (h[j + 1] - h[j]);
      drbdh1[j] = (rhobar[j] - (rho[j]+rhov)/2 + drdh[j]*(hv-h[j])/2) / (h[j+1] - h[j]);
      drbdh2[j] = (rho[j+1] - rhobar[j]) / (h[j+1] - h[j]);
      case[j] = 7;
    <font color="blue">end if</font>;
  <font color="blue">end for</font>;

  <font color="darkgreen">// Saturated fluid property calculations</font>
  sat =<font color="red"> Medium.setSat_p</font>(p);
  Ts=sat.Tsat;
  bubble=<font color="red">Medium.setBubbleState</font>(sat,1);
  dew=<font color="red">Medium.setDewState</font>(sat,1);
  rhol=<font color="red">Medium.bubbleDensity</font>(sat);
  rhov=<font color="red">Medium.dewDensity</font>(sat);
  hl=<font color="red">Medium.bubbleEnthalpy</font>(sat);
  hv=<font color="red">Medium.dewEnthalpy</font>(sat);
  drldp=<font color="red">Medium.dBubbleDensity_dPressure</font>(sat);
  drvdp=<font color="red">Medium.dDewDensity_dPressure</font>(sat);
  dhldp=<font color="red">Medium.dBubbleEnthalpy_dPressure</font>(sat);
  dhvdp=<font color="red">Medium.dDewEnthalpy_dPressure</font>(sat);
  AA = (hv - hl)/(1/rhov - 1/rhol);
  AA1 = ((dhvdp - dhldp)*(rhol - rhov)*rhol*rhov
          - (hv - hl)*(rhov^2*drldp - rhol^2*drvdp))/(rhol - rhov)^2;

  <font color="darkgreen">// Fluid property calculations</font>
  <font color="blue">for </font>j<font color="blue"> in </font>1:N<font color="blue"> loop</font>
    fluid[j].p=p;
    fluid[j].h=h[j];
    T[j]=fluid[j].T;
    rho[j]=fluid[j].d;
    drdp[j]=<font color="red">Medium.density_derp_h</font>(fluid[j].state);
    drdh[j]=<font color="red">Medium.density_derh_p</font>(fluid[j].state);
    x[j]=<font color="red">noEvent</font>(<font color="blue">if </font>h[j]&lt;=hl<font color="blue"> then </font>0<font color="blue"> else </font>
              <font color="blue">if </font>h[j]&gt;=hv<font color="blue"> then </font>1<font color="blue"> else </font>(h[j]-hl)/(hv-hl));
  <font color="blue">end for</font>;

<font color="blue">end </font>CheckFlow1D2phMassBalance;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestFlow1D2phDB<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phDB"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestFlow1D2phDB</H2>
<B>Test case for Flow1D2phDB</B><p>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phDBD.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phDB">
<H3>Information</H3>
<PRE></pre>
<p>The model is designed to test the component  <tt>Flow1D2phDB</tt> (fluid side of a heat exchanger, finite volumes, two-phase flow, computation of the heat transfer coefficient).<br>
This model represent the fluid side of a once-through boiler with an applied external linear temperature profile. The operating fluid is water.<br>
The simulation proceeds through the following steps:
<ul>
    <li>t=0 s. The initial state of the water is subcooled liquid. After 40 seconds all the thermal transients have settled.
    <li>t=100 s. Ramp increase of the external temperature profile. The water starts boiling at t=118 s. At the end of the transient (t=300) the outlet fluid is superheated vapour.</li>
    <li>t=500 s. Ramp decrease of the external temperature profile. After the transient has settled, the fluid in the boiler is again subcooled water.</li>
</ul>
<p> During the transient it is possible to observe the change in the heat transfer coefficients when boiling takes place; note that the h.t.c.'s  do not change abruptly due to the smoothing algorithm inside the <tt>Flow1D2phDB</tt> model.
<p>
Simulation Interval = [0...1000] sec <br>
Integration Algorithm = DASSL <br>
Algorithm Tolerance = 1e-8
</p>
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>Nnodes</TD><TD>8</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Lhex</TD><TD>20</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>Dhex</TD><TD>0.01</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Thickness"
>Thickness</A></TD><TD>thhex</TD><TD>0.002</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A></TD><TD>rhex</TD><TD>Dhex/2</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omegahex</TD><TD>pi*Dhex</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>Ahex</TD><TD>pi*rhex^2</TD><TD>[m2]</TD></TR>
<TR><TD>Real</TD><TD>Cfhex</TD><TD>0.005</TD><TD>&nbsp;</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestFlow1D2phDB <font color="darkgreen">&quot;Test case for Flow1D2phDB&quot;</font>
  <font color="blue">package</font> Medium=<A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Water_WaterIF97_ph.html#Modelica.Media.Water.WaterIF97_ph"
>Modelica.Media.Water.WaterIF97_ph</A>;
  <font color="blue">import </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Constants.html#Modelica.Constants"
>Modelica.Constants</A>.*;
  <font color="darkgreen">// number of Nodes</font>
  <font color="blue">parameter </font>Integer Nnodes=8;
  <font color="darkgreen">// total length</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A> Lhex=20;
  <font color="darkgreen">// internal diameter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A> Dhex=0.01;
  <font color="darkgreen">// wall thickness</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Thickness"
>Thickness</A> thhex=0.002;
  <font color="darkgreen">// internal radius</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A> rhex=Dhex/2;
  <font color="darkgreen">// internal perimeter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A> omegahex=pi*Dhex;
  <font color="darkgreen">// internal cross section</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A> Ahex=pi*rhex^2;
  <font color="darkgreen">// friction factor</font>
  <font color="blue">parameter </font>Real Cfhex=0.005;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1D2phDB"
>ThermoPower.Water.Flow1D2phDB</A> hex(
    N=Nnodes,
    L=Lhex,
    omega=omegahex,
    A=Ahex,
    Cfnom=0.005,
    DynamicMomentum=false,
    hstartin=1e6,
    hstartout=1e6,
    pstartin=60e5,
    pstartout=60e5,
    gamma_b=20000,
    Dhyd=2*rhex,
    wnom=0.05,
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.Cfnom,
    initOpt=ThermoPower.Choices.Init.Options.steadyState);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.ValveLin"
>ThermoPower.Water.ValveLin</A> valve(Kv=0.05/60e5);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SinkP"
>ThermoPower.Water.SinkP</A> Sink(p0=0);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A> hIn(
    height=0,
    offset=1e6,
    startTime=30);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> extTemp1(
    duration=100,
    height=50,
    offset=540,
    startTime=100);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SourceW"
>ThermoPower.Water.SourceW</A> Source(
    w0=0.05,
    p0=60e5,
    G=0.05/600e5);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> extTemp2(
    duration=100,
    height=-50,
    startTime=500);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Add"
>Modelica.Blocks.Math.Add</A> Add1;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> xValve(height=0, offset=1);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.MetalTube"
>Thermal.MetalTube</A> Tube(
    N=Nnodes,
    L=Lhex,
    rint=rhex,
    rhomcm=7000*680,
    lambda=20,
    rext=rhex + 2*thhex,
    Tstart1=510,
    TstartN=510,
    initOpt=ThermoPower.Choices.Init.Options.steadyState);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.ConvHT_htc"
>Thermal.ConvHT_htc</A> htFluid(N=Nnodes);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.ConvHT"
>Thermal.ConvHT</A> htExt(N=Nnodes, gamma=10000);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.TempSource1Dlin"
>Thermal.TempSource1Dlin</A> tempSource(N=Nnodes);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Add"
>Modelica.Blocks.Math.Add</A> Add2;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> DT(k=5);
<font color="blue">equation </font>
  <font color="red">connect</font>(hex.outfl, valve.inlet);
  <font color="red">connect</font>(valve.outlet, Sink.flange);
  <font color="red">connect</font>(Source.flange, hex.infl);
  <font color="red">connect</font>(htExt.side2, Tube.ext);
  <font color="red">connect</font>(Tube.int, htFluid.otherside);
  <font color="red">connect</font>(htFluid.fluidside, hex.wall);
  <font color="red">connect</font>(tempSource.wall, htExt.side1);
  <font color="red">connect</font>(hIn.y, Source.in_h);
  <font color="red">connect</font>(tempSource.temperature_node1, Add1.y);
  <font color="red">connect</font>(tempSource.temperature_nodeN, Add2.y);
  <font color="red">connect</font>(Add2.u2, DT.y);
  <font color="red">connect</font>(Add2.u1, Add1.y);
  <font color="red">connect</font>(xValve.y, valve.cmd);
  <font color="red">connect</font>(extTemp1.y, Add1.u2);
  <font color="red">connect</font>(extTemp2.y, Add1.u1);
<font color="blue">end </font>TestFlow1D2phDB;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestFlow1D2phDB_hf<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phDB_hf"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestFlow1D2phDB_hf</H2>
<B>Test case for Flow1D2ph</B><p>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phDB_hfD.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phDB_hf">
<H3>Information</H3>
<PRE></pre>
<p>The model is designed to test the component  <tt>Flow1D2phDB</tt> (fluid side of a heat exchanger, finite volumes, two-phase flow, heat transfer computation) with a prescribed external heat flux, for debugging purposes. The heat transfer coefficient on the <tt>wall</tt> connector should be a continuous function.
<p>
Simulation Interval = [0...300] sec <br>
Integration Algorithm = DASSL <br>
Algorithm Tolerance = 1e-7
</p>
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>Nnodes</TD><TD>10</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Lhex</TD><TD>10</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>Dhex</TD><TD>0.02</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Thickness"
>Thickness</A></TD><TD>thhex</TD><TD>0</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A></TD><TD>rhex</TD><TD>Dhex/2</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omegahex</TD><TD>Dhex</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>Ahex</TD><TD>pi*rhex^2</TD><TD>[m2]</TD></TR>
<TR><TD>Real</TD><TD>Cfhex</TD><TD>0.005</TD><TD>&nbsp;</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestFlow1D2phDB_hf <font color="darkgreen">&quot;Test case for Flow1D2ph&quot;</font>
  <font color="blue">package</font> Medium=<A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Water_WaterIF97_ph.html#Modelica.Media.Water.WaterIF97_ph"
>Modelica.Media.Water.WaterIF97_ph</A>(smoothModel=true);
  <font color="blue">import </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Constants.html#Modelica.Constants"
>Modelica.Constants</A>.*;
  <font color="darkgreen">// number of Nodes</font>
  <font color="blue">parameter </font>Integer Nnodes=10;
  <font color="darkgreen">// total length</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> Lhex=10;
  <font color="darkgreen">// internal diameter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Modelica.SIunits.Diameter</A> Dhex=0.02;
  <font color="darkgreen">// wall thickness</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Thickness"
>Modelica.SIunits.Thickness</A> thhex=0;
  <font color="darkgreen">// internal radius</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Modelica.SIunits.Radius</A> rhex=Dhex/2;
  <font color="darkgreen">// internal perimeter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> omegahex=Dhex;
  <font color="darkgreen">// internal cross section</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</A> Ahex=pi*rhex^2;
  <font color="darkgreen">// friction factor</font>
  <font color="blue">parameter </font>Real Cfhex=0.005;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1D2phDB"
>ThermoPower.Water.Flow1D2phDB</A> hex(
    N=Nnodes,
    L=Lhex,
    omega=omegahex,
    Dhyd=Dhex,
    A=Ahex,
    Cfnom=0.005,
    DynamicMomentum=false,
    hstartin=6e5,
    hstartout=6e5,
    pstartin=10e5,
    pstartout=10e5,
  <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    wnom=0.1,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.Cfnom);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.ValveLin"
>ThermoPower.Water.ValveLin</A> valve(Kv=0.1/15e5);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.HeatSource1Dhtc"
>ThermoPower.Thermal.HeatSource1Dhtc</A> heatSource(
    N=Nnodes,
    L=Lhex,
    omega=omegahex);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SinkP"
>ThermoPower.Water.SinkP</A> Sink(p0=1e5);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> extPower(
    duration=30,
    height=3e5,
    startTime=10);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SourceW"
>ThermoPower.Water.SourceW</A> Source(w0=0.1);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> extPower2(
    duration=10,
    height=-3e5,
    startTime=70);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Add"
>Modelica.Blocks.Math.Add</A> Add1;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> xValve(height=0, offset=1);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> hIn1(
    duration=30,
    offset=6e5,
    height=2.2e6,
    startTime=120);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Add"
>Modelica.Blocks.Math.Add</A> Add2;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> extPower1(
    duration=60,
    height=-2.5e5,
    startTime=170);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> extPower3(
    duration=30,
    height=2.5e5,
    startTime=260);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Add"
>Modelica.Blocks.Math.Add</A> Add3;
<font color="blue">initial </font><font color="blue">equation </font>
  <font color="red">der</font>(hex.p) = 0;
  <font color="red">der</font>(hex.htilde) =<font color="red"> zeros</font>(Nnodes - 1);
<font color="blue">equation </font>
  <font color="red">connect</font>(heatSource.wall, hex.wall);
  <font color="red">connect</font>(hex.outfl, valve.inlet);
  <font color="red">connect</font>(valve.outlet, Sink.flange);
  <font color="red">connect</font>(Source.flange, hex.infl);
  <font color="red">connect</font>(hIn1.y, Source.in_h);
  <font color="red">connect</font>(xValve.y, valve.cmd);
  <font color="red">connect</font>(Add3.y, heatSource.power);
  <font color="red">connect</font>(Add3.u1, Add2.y);
  <font color="red">connect</font>(Add3.u2, Add1.y);
  <font color="red">connect</font>(extPower.y, Add1.u2);
  <font color="red">connect</font>(extPower2.y, Add1.u1);
  <font color="red">connect</font>(Add2.u1, extPower1.y);
  <font color="red">connect</font>(Add2.u2, extPower3.y);
<font color="blue">end </font>TestFlow1D2phDB_hf;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestFlow1D2phChen<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phChen"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestFlow1D2phChen</H2>
<B>Test case for Flow1D2phChen</B><p>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phChenD.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phChen">
<H3>Information</H3>
<PRE></pre>
<p>The model is designed to test the component  <tt>Flow1D2phDB</tt> (fluid side of a heat exchanger, finite volumes, two-phase flow, computation of the heat transfer coefficient).<br>
This model represent the fluid side of a once-through boiler with an applied external linear temperature profile. The operating fluid is water.<br>
The simulation proceeds through the following steps:
<ul>
    <li>t=0 s. The initial state of the water is subcooled liquid. After 40 seconds all the thermal transients have settled.
    <li>t=100 s. Ramp increase of the external temperature profile. The water starts boiling at t=118 s. At the end of the transient (t=300) the outlet fluid is superheated vapour.</li>
    <li>t=500 s. Ramp decrease of the external temperature profile. After the transient has settled, the fluid in the boiler is again subcooled water.</li>
</ul>
<p> During the transient it is possible to observe the change in the heat transfer coefficients when boiling takes place; note that the h.t.c.'s  do not change abruptly due to the smoothing algorithm inside the <tt>Flow1D2phDB</tt> model.
<p>
Simulation Interval = [0...1000] sec <br>
Integration Algorithm = DASSL <br>
Algorithm Tolerance = 1e-8
</p>
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>Nnodes</TD><TD>8</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Lhex</TD><TD>20</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>Dhex</TD><TD>0.01</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Thickness"
>Thickness</A></TD><TD>thhex</TD><TD>0.002</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A></TD><TD>rhex</TD><TD>Dhex/2</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omegahex</TD><TD>pi*Dhex</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>Ahex</TD><TD>pi*rhex^2</TD><TD>[m2]</TD></TR>
<TR><TD>Real</TD><TD>Cfhex</TD><TD>0.005</TD><TD>&nbsp;</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestFlow1D2phChen <font color="darkgreen">&quot;Test case for Flow1D2phChen&quot;</font>
  <font color="blue">package</font> Medium=<A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Water_WaterIF97_ph.html#Modelica.Media.Water.WaterIF97_ph"
>Modelica.Media.Water.WaterIF97_ph</A>;
  <font color="blue">import </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Constants.html#Modelica.Constants"
>Modelica.Constants</A>.*;
  <font color="darkgreen">// number of Nodes</font>
  <font color="blue">parameter </font>Integer Nnodes=8;
  <font color="darkgreen">// total length</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A> Lhex=20;
  <font color="darkgreen">// internal diameter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A> Dhex=0.01;
  <font color="darkgreen">// wall thickness</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Thickness"
>Thickness</A> thhex=0.002;
  <font color="darkgreen">// internal radius</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A> rhex=Dhex/2;
  <font color="darkgreen">// internal perimeter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A> omegahex=pi*Dhex;
  <font color="darkgreen">// internal cross section</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A> Ahex=pi*rhex^2;
  <font color="darkgreen">// friction factor</font>
  <font color="blue">parameter </font>Real Cfhex=0.005;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1D2phChen"
>ThermoPower.Water.Flow1D2phChen</A> hex(
    N=Nnodes,
    L=Lhex,
    omega=omegahex,
    A=Ahex,
    Cfnom=0.005,
    DynamicMomentum=false,
    hstartin=1e6,
    hstartout=1e6,
    pstartin=60e5,
    pstartout=60e5,
    Dhyd=2*rhex,
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    wnom=0.05,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.NoFriction,
    initOpt=ThermoPower.Choices.Init.Options.steadyState);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.ValveLin"
>ThermoPower.Water.ValveLin</A> valve(Kv=0.05/60e5);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SinkP"
>ThermoPower.Water.SinkP</A> Sink(p0=0);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A> hIn(
    height=0,
    offset=1e6,
    startTime=30);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> extTemp1(
    duration=100,
    height=60,
    offset=540,
    startTime=100);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SourceW"
>ThermoPower.Water.SourceW</A> Source(
    w0=0.05,
    p0=60e5,
    G=0.05/600e5);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> extTemp2(
    duration=100,
    height=-30,
    startTime=500);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Add"
>Modelica.Blocks.Math.Add</A> Add1;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> xValve(height=0, offset=1);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.MetalTube"
>Thermal.MetalTube</A> Tube(
    N=Nnodes,
    L=Lhex,
    rint=rhex,
    rhomcm=7000*680,
    lambda=20,
    rext=rhex + 2*thhex,
    Tstart1=510,
    TstartN=510,
    initOpt=ThermoPower.Choices.Init.Options.steadyState);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.ConvHT_htc"
>Thermal.ConvHT_htc</A> htFluid(N=Nnodes);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.ConvHT"
>Thermal.ConvHT</A> htExt(N=Nnodes, gamma=10000);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.TempSource1Dlin"
>Thermal.TempSource1Dlin</A> tempSource(N=Nnodes);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Add"
>Modelica.Blocks.Math.Add</A> Add2;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> DT(k=5);
<font color="blue">equation </font>
  <font color="red">connect</font>(hex.outfl, valve.inlet);
  <font color="red">connect</font>(valve.outlet, Sink.flange);
  <font color="red">connect</font>(Source.flange, hex.infl);
  <font color="red">connect</font>(htExt.side2, Tube.ext);
  <font color="red">connect</font>(Tube.int, htFluid.otherside);
  <font color="red">connect</font>(htFluid.fluidside, hex.wall);
  <font color="red">connect</font>(tempSource.wall, htExt.side1);
  <font color="red">connect</font>(hIn.y, Source.in_h);
  <font color="red">connect</font>(xValve.y, valve.cmd);
  <font color="red">connect</font>(Add1.y, tempSource.temperature_node1);
  <font color="red">connect</font>(DT.y, Add2.u2);
  <font color="red">connect</font>(Add2.u1, Add1.y);
  <font color="red">connect</font>(tempSource.temperature_nodeN, Add2.y);
  <font color="red">connect</font>(extTemp1.y, Add1.u2);
  <font color="red">connect</font>(extTemp2.y, Add1.u1);
<font color="blue">end </font>TestFlow1D2phChen;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestFlow1D2phChen_hf<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phChen_hf"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestFlow1D2phChen_hf</H2>
<B>Test case for Flow1D2ph</B><p>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phChen_hfD.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestFlow1D2phChen_hf">
<H3>Information</H3>
<PRE></pre>
<p>The model is designed to test the component  <tt>Flow1D2phDB</tt> (fluid side of a heat exchanger, finite volumes, two-phase flow, heat transfer computation) with a prescribed external heat flux, for debugging purposes. The heat transfer coefficient on the <tt>wall</tt> connector should be a continuous function.
<p>
Simulation Interval = [0...300] sec <br>
Integration Algorithm = DASSL <br>
Algorithm Tolerance = 1e-7
</p>
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>Nnodes</TD><TD>10</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Lhex</TD><TD>10</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>Dhex</TD><TD>0.02</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Thickness"
>Thickness</A></TD><TD>thhex</TD><TD>0</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A></TD><TD>rhex</TD><TD>Dhex/2</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omegahex</TD><TD>Dhex</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>Ahex</TD><TD>pi*rhex^2</TD><TD>[m2]</TD></TR>
<TR><TD>Real</TD><TD>Cfhex</TD><TD>0.005</TD><TD>&nbsp;</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestFlow1D2phChen_hf <font color="darkgreen">&quot;Test case for Flow1D2ph&quot;</font>
  <font color="blue">package</font> Medium=<A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Water_WaterIF97_ph.html#Modelica.Media.Water.WaterIF97_ph"
>Modelica.Media.Water.WaterIF97_ph</A>(smoothModel=true);
  <font color="blue">import </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Constants.html#Modelica.Constants"
>Modelica.Constants</A>.*;
  <font color="darkgreen">// number of Nodes</font>
  <font color="blue">parameter </font>Integer Nnodes=10;
  <font color="darkgreen">// total length</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> Lhex=10;
  <font color="darkgreen">// internal diameter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Modelica.SIunits.Diameter</A> Dhex=0.02;
  <font color="darkgreen">// wall thickness</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Thickness"
>Modelica.SIunits.Thickness</A> thhex=0;
  <font color="darkgreen">// internal radius</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Modelica.SIunits.Radius</A> rhex=Dhex/2;
  <font color="darkgreen">// internal perimeter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> omegahex=Dhex;
  <font color="darkgreen">// internal cross section</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</A> Ahex=pi*rhex^2;
  <font color="darkgreen">// friction factor</font>
  <font color="blue">parameter </font>Real Cfhex=0.005;
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1D2phChen"
>ThermoPower.Water.Flow1D2phChen</A> hex(
    N=Nnodes,
    L=Lhex,
    omega=omegahex,
    Dhyd=Dhex,
    A=Ahex,
    Cfnom=0.005,
    DynamicMomentum=false,
    hstartin=6e5,
    hstartout=6e5,
    pstartin=10e5,
    pstartout=10e5,
  <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    wnom=0.1,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.NoFriction);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.ValveLin"
>ThermoPower.Water.ValveLin</A> valve(Kv=0.1/15e5);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.HeatSource1Dhtc"
>ThermoPower.Thermal.HeatSource1Dhtc</A> heatSource(
    N=Nnodes,
    L=Lhex,
    omega=omegahex);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SinkP"
>ThermoPower.Water.SinkP</A> Sink(p0=1e5);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> extPower(
    duration=30,
    height=3e5,
    startTime=10);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SourceW"
>ThermoPower.Water.SourceW</A> Source(w0=0.1);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> extPower2(
    duration=10,
    height=-3e5,
    startTime=70);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Add"
>Modelica.Blocks.Math.Add</A> Add1;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> xValve(height=0, offset=1);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> hIn1(
    duration=30,
    offset=6e5,
    height=2.2e6,
    startTime=120);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Add"
>Modelica.Blocks.Math.Add</A> Add2;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> extPower1(
    duration=60,
    height=-2.5e5,
    startTime=170);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> extPower3(
    duration=30,
    height=2.5e5,
    startTime=260);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Add"
>Modelica.Blocks.Math.Add</A> Add3;
<font color="blue">equation </font>
  <font color="red">connect</font>(heatSource.wall, hex.wall);
  <font color="red">connect</font>(hex.outfl, valve.inlet);
  <font color="red">connect</font>(valve.outlet, Sink.flange);
  <font color="red">connect</font>(Source.flange, hex.infl);
<font color="blue">initial </font><font color="blue">equation </font>
  <font color="red">der</font>(hex.p) = 0;
  <font color="red">der</font>(hex.htilde) =<font color="red"> zeros</font>(Nnodes - 1);
<font color="blue">equation </font>
  <font color="red">connect</font>(extPower.y, Add1.u2);
  <font color="red">connect</font>(extPower2.y, Add1.u1);
  <font color="red">connect</font>(extPower1.y, Add2.u1);
  <font color="red">connect</font>(extPower3.y, Add2.u2);
  <font color="red">connect</font>(xValve.y, valve.cmd);
  <font color="red">connect</font>(Source.in_h, hIn1.y);
  <font color="red">connect</font>(Add3.y, heatSource.power);
  <font color="red">connect</font>(Add3.u1, Add2.y);
  <font color="red">connect</font>(Add3.u2, Add1.y);
<font color="blue">end </font>TestFlow1D2phChen_hf;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestFlow1Dfem2ph<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestFlow1Dfem2ph"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestFlow1Dfem2ph</H2>
<B>Test case for Flow1D2ph</B><p>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestFlow1Dfem2phD.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestFlow1Dfem2ph">
<H3>Information</H3>
<PRE></pre>
<p>The model is designed to test the component  <tt>Flow1D2ph</tt> (fluid side of a heat exchanger, finite volumes, two-phase flow).<br>
This model represent the fluid side of a once-through boiler with an applied external heat flow. The operating fluid is water.<br>
During the simulation, the inlet specific enthalpy and heat flux are changed, while maintaining the inlet flowrate constant:
<ul>
    <li>t=0 s. The initial state of the water is subcooled liquid.
    <li>t=10 s. Ramp increase of the applied heat flow. The water starts boiling and is blown out of the outlet, whose pressure and flowrate undergo a transient increase. At the end of the transient the outlet fluid is in superheated vapour state.</li>
    <li>t=30 s. Step increase of the inlet enthalpy</li>
    <li>t=50 s. The heat flow is reduced to zero in 2s. The vapour collapses, causing a suddend decrease in the outlet pressure and flowrate, until the liquid fills again the entire boiler. At that instant, the pressure and flowrate rise again rapidly to the inlet values.</li>
</ul>
<p>
Simulation Interval = [0...80] sec <br>
Integration Algorithm = DASSL <br>
Algorithm Tolerance = 1e-6
</p>
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>Nnodes</TD><TD>11</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Lhex</TD><TD>10</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>Dhex</TD><TD>0.02</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Thickness"
>Thickness</A></TD><TD>thhex</TD><TD>1e-3</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A></TD><TD>rhex</TD><TD>Dhex/2</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omegahex</TD><TD>Modelica.Constants.pi*Dhex</TD><TD>[m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>Ahex</TD><TD>Modelica.Constants.pi*rhex^2</TD><TD>[m2]</TD></TR>
<TR><TD>Real</TD><TD>Cfhex</TD><TD>0.005</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>hin</TD><TD>6e5</TD><TD>[J/kg]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>phex</TD><TD>1e6</TD><TD>[Pa]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>whex</TD><TD>1</TD><TD>[kg/s]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestFlow1Dfem2ph <font color="darkgreen">&quot;Test case for Flow1D2ph&quot;</font>
  <font color="blue">package</font> Medium=<A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_Water_WaterIF97_ph.html#Modelica.Media.Water.WaterIF97_ph"
>Modelica.Media.Water.WaterIF97_ph</A>;
  <font color="darkgreen">// number of Nodes</font>
  <font color="blue">parameter </font>Integer Nnodes=11;
  <font color="darkgreen">// total length</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> Lhex=10;
  <font color="darkgreen">// internal diameter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Modelica.SIunits.Diameter</A> Dhex=0.02;
  <font color="darkgreen">// wall thickness</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Thickness"
>Modelica.SIunits.Thickness</A> thhex=1e-3;
  <font color="darkgreen">// internal radius</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Modelica.SIunits.Radius</A> rhex=Dhex/2;
  <font color="darkgreen">// internal perimeter</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> omegahex=Modelica.Constants.pi*Dhex;
  <font color="darkgreen">// internal cross section</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</A> Ahex=Modelica.Constants.pi*rhex^2;
  <font color="darkgreen">// friction factor</font>
  <font color="blue">parameter </font>Real Cfhex=0.005;

  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>Modelica.SIunits.SpecificEnthalpy</A> hin=6e5;
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</A> phex=1e6;
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> whex=1;

  <A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1Dfem2ph"
>Water.Flow1Dfem2ph</A> hex(
    N=Nnodes,
    L=Lhex,
    omega=omegahex,
    Dhyd=Dhex,
    A=Ahex,
    Cfnom=0.005,
    DynamicMomentum=false,
    hstartin=hin,
    hstartout=hin,
    wnom=1,
    pstartin=phex,
    pstartout=phex,
    ML=0,
  <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.Cfnom);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.ValveLin"
>Water.ValveLin</A> valve(Kv=whex/(phex));
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SinkP"
>Water.SinkP</A> Sink(p0=0);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A> hIn(
    height=1e5,
    offset=hin,
    startTime=50);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> extPower(
    duration=30,
    height=3e6,
    startTime=10);
  <A HREF="ThermoPower_Water.html#ThermoPower.Water.SourceW"
>Water.SourceW</A> Source(
    h=hin,
    w0=whex,
    p0=phex,
    G=0);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> extPower2(
    duration=10,
    height=-3e6,
    startTime=70);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Math.html#Modelica.Blocks.Math.Add"
>Modelica.Blocks.Math.Add</A> Add1;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Ramp"
>Modelica.Blocks.Sources.Ramp</A> xValve(height=0, offset=1);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.MetalTube"
>Thermal.MetalTube</A> MetalWall(
    N=Nnodes,
    rint=rhex,
    rhomcm=4.9e6,
    L=Lhex,
    lambda=20,
    WallRes=true,
    rext=rhex + thhex,
    Tstart1=415.592,
    TstartN=415.592,
    initOpt=ThermoPower.Choices.Init.Options.steadyState);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.HeatSource1D"
>Thermal.HeatSource1D</A> HeatSource1D1(
    N=Nnodes,
    Nt=1,
    L=Lhex,
    omega=(rhex + thhex)*2*Modelica.Constants.pi);
<font color="blue">equation </font>
  <font color="red">connect</font>(hex.outfl, valve.inlet);
  <font color="red">connect</font>(valve.outlet, Sink.flange);
  <font color="red">connect</font>(Source.flange, hex.infl);
  <font color="red">connect</font>(hex.wall, MetalWall.int);
  <font color="red">connect</font>(HeatSource1D1.wall, MetalWall.ext);
  <font color="red">connect</font>(extPower2.y, Add1.u1);
  <font color="red">connect</font>(extPower.y, Add1.u2);
  <font color="red">connect</font>(hIn.y, Source.in_h);
  <font color="red">connect</font>(Add1.y, HeatSource1D1.power);
  <font color="red">connect</font>(xValve.y, valve.cmd);
<font color="blue">end </font>TestFlow1Dfem2ph;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Flow1D_check<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="ThermoPower.Test.ThermoHydraulicElements.Flow1D_checkI.png" ALT="ThermoPower.Test.ThermoHydraulicElements.Flow1D_check" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="ThermoPower.Test.ThermoHydraulicElements.Flow1D_check"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.Flow1D_check</H2>
<B>Extended Flow1D model with mass &amp; energy balance computation</B><p>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.Flow1D_checkD.png" ALT="ThermoPower.Test.ThermoHydraulicElements.Flow1D_check">
<H3>Information</H3>
<PRE></pre>
<p>This model extends <tt>Water.Flow1D</tt> by adding the computation of mass and energy flows and buildups. It can be used to check the correctness of the <tt>Water.Flow1D</tt> model.</p>
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD>StandardWater</TD><TD>Medium model</TD></TR>
<TR><TD>Integer</TD><TD>N</TD><TD>2</TD><TD>Number of nodes for thermal variables</TD></TR>
<TR><TD>Integer</TD><TD>Nt</TD><TD>1</TD><TD>Number of tubes in parallel</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Distance"
>Distance</A></TD><TD>L</TD><TD>&nbsp;</TD><TD>Tube length [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Position"
>Position</A></TD><TD>H</TD><TD>0</TD><TD>Elevation of outlet over inlet [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>A</TD><TD>&nbsp;</TD><TD>Cross-sectional area (single tube) [m2]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omega</TD><TD>&nbsp;</TD><TD>Perimeter of heat transfer surface (single tube) [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Dhyd</TD><TD>&nbsp;</TD><TD>Hydraulic Diameter (single tube) [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>wnom</TD><TD>&nbsp;</TD><TD>Nominal mass flowrate (total) [kg/s]</TD></TR>
<TR><TD><A HREF="ThermoPower_Choices_Flow1D_FFtypes.html#ThermoPower.Choices.Flow1D.FFtypes.Temp"
>Temp</A></TD><TD>FFtype</TD><TD>&nbsp;</TD><TD>Friction Factor Type</TD></TR>
<TR><TD>Real</TD><TD>Kfnom</TD><TD>0</TD><TD>Nominal hydraulic resistance coefficient [Pa.kg/m^3/(kg/s)^2]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dpnom</TD><TD>0</TD><TD>Nominal pressure drop (friction term only!) [Pa]</TD></TR>
<TR><TD><A HREF="ThermoPower.html#ThermoPower.Density"
>Density</A></TD><TD>rhonom</TD><TD>0</TD><TD>Nominal inlet density [kg/m3]</TD></TR>
<TR><TD>Real</TD><TD>Cfnom</TD><TD>0</TD><TD>Nominal Fanning friction factor</TD></TR>
<TR><TD>Real</TD><TD>e</TD><TD>0</TD><TD>Relative roughness (ratio roughness/diameter)</TD></TR>
<TR><TD>Boolean</TD><TD>DynamicMomentum</TD><TD>false</TD><TD>Inertial phenomena accounted for</TD></TR>
<TR><TD><A HREF="ThermoPower_Choices_Flow1D_HCtypes.html#ThermoPower.Choices.Flow1D.HCtypes.Temp"
>Temp</A></TD><TD>HydraulicCapacitance</TD><TD>HCtypes.Downstream</TD><TD>Location of the hydraulic capacitance</TD></TR>
<TR><TD>Boolean</TD><TD>avoidInletEnthalpyDerivative</TD><TD>true</TD><TD>Avoid inlet enthalpy derivative</TD></TR>
<TR><TD>Real</TD><TD>wnf</TD><TD>0.01</TD><TD>Fraction of nominal flow rate at which linear friction equals turbulent friction</TD></TR>
<TR><TD>Real</TD><TD>Kfc</TD><TD>1</TD><TD>Friction factor correction coefficient</TD></TR>
<TR><TD><A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.DHT"
>DHT</A></TD><TD>wall</TD><TD>redeclare ThermoPower.Therma...</TD><TD>&nbsp;</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Initialisation</B></TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>pstartin</TD><TD>1e5</TD><TD>Inlet pressure start value [Pa]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>pstartout</TD><TD>1e5</TD><TD>Outlet pressure start value [Pa]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>hstartin</TD><TD>1e5</TD><TD>Inlet enthalpy start value [J/kg]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>hstartout</TD><TD>1e5</TD><TD>Outlet enthalpy start value [J/kg]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>hstart[N]</TD><TD>linspace(hstartin, hstartout...</TD><TD>Start value of enthalpy vector (initialized by default) [J/kg]</TD></TR>
<TR><TD><A HREF="ThermoPower_Choices_Init_Options.html#ThermoPower.Choices.Init.Options.Temp"
>Temp</A></TD><TD>initOpt</TD><TD>Choices.Init.Options.noInit</TD><TD>Initialisation option</TD></TR>
</TABLE>
<H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="ThermoPower_Water.html#ThermoPower.Water.FlangeA"
>FlangeA</A></TD><TD>infl</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="ThermoPower_Water.html#ThermoPower.Water.FlangeB"
>FlangeB</A></TD><TD>outfl</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.DHT"
>DHT</A></TD><TD>wall</TD><TD>&nbsp;</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> Flow1D_check <font color="darkgreen">
  &quot;Extended Flow1D model with mass &amp; energy balance computation&quot;</font>

  <font color="blue">extends </font><A HREF="ThermoPower_Water.html#ThermoPower.Water.Flow1D"
>Water.Flow1D</A>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnergy"
>SpecificEnergy</A> Etot;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnergy"
>SpecificEnergy</A> Evol[N - 1];
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Mass</A> Mtot;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Mass</A> Mvol[N - 1];
  Real balM;
  Real balE;
<font color="blue">equation </font>
  <font color="blue">for </font>j<font color="blue"> in </font>1:N - 1<font color="blue"> loop</font>
    Mvol[j] = A*l*rhobar[j];
    Evol[j] = Mvol[j]*((h[j] + h[j + 1])/2 - p/rhobar[j]);
  <font color="blue">end for</font>;
  <font color="darkgreen">// M is computed in base class</font>
  Mtot = M;
  Etot =<font color="red"> sum</font>(Evol);
  balM = infl.w + outfl.w;

  balE = infl.w*(<font color="blue">if </font>infl.w &gt; 0<font color="blue"> then </font>infl.hBA<font color="blue"> else </font>infl.hAB) + outfl.w*(<font color="blue">if </font>
    outfl.w &gt; 0<font color="blue"> then </font>outfl.hAB<font color="blue"> else </font>outfl.hBA) +<font color="red"> sum</font>(wall.phi[1:N - 1] +
    wall.phi[2:N])/2*omega*l;
<font color="blue">end </font>Flow1D_check;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestGasFlow1DA<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestGasFlow1DA"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestGasFlow1DA</H2>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestGasFlow1DAD.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestGasFlow1DA">
<H3>Information</H3>
<PRE></pre>
<p>The model is designed to test the component  <tt>Gas.Flow1D</tt> (fluid side of a heat exchanger, finite volumes).<br>
The model starts at steady state. At t = 10 s, step variation of the temperature of the fluid entering the heat exchanger. At t = 20 s, step variation of the thermal flow entering the heat exchanger lateral surface. At t = 50 s, step reduction of the outlet valve opening.<br>
The working fluid is pure nitrogen.
</ul>
<p>
Simulation Interval = [0...60] sec <br>
Integration Algorithm = DASSL <br>
Algorithm Tolerance = 1e-6
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>Nnodes</TD><TD>10</TD><TD>number of Nodes</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Lhex</TD><TD>200</TD><TD>total length [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>Dihex</TD><TD>0.02</TD><TD>internal diameter [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A></TD><TD>rhex</TD><TD>Dihex/2</TD><TD>internal radius [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omegahex</TD><TD>Modelica.Constants.pi*Dihex</TD><TD>internal perimeter [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>Ahex</TD><TD>Modelica.Constants.pi*rhex^2</TD><TD>internal cross section [m2]</TD></TR>
<TR><TD>Real</TD><TD>Cfhex</TD><TD>0.005</TD><TD>friction coefficient</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>whex</TD><TD>0.05</TD><TD>nominal (and initial) mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>phex</TD><TD>3e5</TD><TD>initial pressure [Pa]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</A></TD><TD>Tinhex</TD><TD>300</TD><TD>initial inlet temperature [K]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</A></TD><TD>Touthex</TD><TD>300</TD><TD>initial outlet temperature [K]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.EnergyFlowRate"
>EnergyFlowRate</A></TD><TD>W</TD><TD>1e3</TD><TD>height of power step [W]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestGasFlow1DA
  <font color="blue">replaceable </font><font color="blue">package</font> Medium =
      <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_IdealGases_SingleGases_N2.html#Modelica.Media.IdealGases.SingleGases.N2"
>Modelica.Media.IdealGases.SingleGases.N2</A>
    <font color="blue">extends </font>Modelica.Media.Interfaces.PartialMedium;
  <font color="blue">parameter </font>Integer Nnodes=10 <font color="darkgreen">&quot;number of Nodes&quot;</font>;
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> Lhex=200 <font color="darkgreen">&quot;total length&quot;</font>;
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Modelica.SIunits.Diameter</A> Dihex=0.02 <font color="darkgreen">&quot;internal diameter&quot;</font>;
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Modelica.SIunits.Radius</A> rhex=Dihex/2 <font color="darkgreen">&quot;internal radius&quot;</font>;
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Modelica.SIunits.Length</A> omegahex=Modelica.Constants.pi*Dihex <font color="darkgreen">
    &quot;internal perimeter&quot;</font>;
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</A> Ahex=Modelica.Constants.pi*rhex^2 <font color="darkgreen">
    &quot;internal cross section&quot;</font>;
  <font color="blue">parameter </font>Real Cfhex=0.005 <font color="darkgreen">&quot;friction coefficient&quot;</font>;
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>Modelica.SIunits.MassFlowRate</A> whex=0.05 <font color="darkgreen">
    &quot;nominal (and initial) mass flow rate&quot;</font>;
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</A> phex=3e5 <font color="darkgreen">&quot;initial pressure&quot;</font>;
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</A> Tinhex=300 <font color="darkgreen">&quot;initial inlet temperature&quot;</font>;
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</A> Touthex=300 <font color="darkgreen">&quot;initial outlet temperature&quot;</font>;
 <font color="darkgreen">// parameter Temperature deltaT=10 &quot;height of temperature step&quot;;</font>
  <font color="blue">parameter </font><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.EnergyFlowRate"
>Modelica.SIunits.EnergyFlowRate</A> W=1e3 <font color="darkgreen">&quot;height of power step&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Modelica.SIunits.Mass</A> Mhex <font color="darkgreen">&quot;Mass in the heat exchanger&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Modelica.SIunits.Mass</A> Mbal <font color="darkgreen">&quot;Mass resulting from the mass balance&quot;</font>;
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Mass"
>Modelica.SIunits.Mass</A> Merr <font color="darkgreen">&quot;Mass balance error&quot;</font>;

  <A HREF="ThermoPower_Gas.html#ThermoPower.Gas.SourceW"
>Gas.SourceW</A> SourceW1(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    p0=phex,
    T=Tinhex,
    w0=whex);
  <A HREF="ThermoPower_Gas.html#ThermoPower.Gas.SinkP"
>Gas.SinkP</A> SinkP1(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    p0=0.1e5,
    T=300);
  <A HREF="ThermoPower_Gas.html#ThermoPower.Gas.SensT"
>Gas.SensT</A> SensT1(<font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium);
  <A HREF="ThermoPower_Gas.html#ThermoPower.Gas.SensT"
>Gas.SensT</A> SensT2(<font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium);
  <A HREF="ThermoPower_Gas.html#ThermoPower.Gas.Flow1D"
>Gas.Flow1D</A> hex(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    N=Nnodes,
    L=Lhex,
    A=Ahex,
    omega=omegahex,
    Dhyd=Dihex,
    wnom=whex,
    Cfnom=Cfhex,
    Tstartin=Tinhex,
    Tstartout=Touthex,
    pstart=phex,
    FFtype=ThermoPower.Choices.Flow1D.FFtypes.Cfnom,
    initOpt=ThermoPower.Choices.Init.Options.steadyState);
  <A HREF="ThermoPower_Gas.html#ThermoPower.Gas.ValveLin"
>Gas.ValveLin</A> ValveLin1(<font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium, Kv=whex/phex);
  <A HREF="ThermoPower_Thermal.html#ThermoPower.Thermal.HeatSource1D"
>Thermal.HeatSource1D</A> HeatSource1D1(
    N=Nnodes,
    L=Lhex,
    omega=omegahex);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A> Step1(height=W, startTime=20);
<font color="darkgreen">/*  Modelica.Blocks.Sources.Step Step3(
    height=deltaT,
    offset=Tinhex,
    startTime=1) annotation 10;*/</font>
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A> Step4(
    height=10,
    offset=Tinhex,
    startTime=10);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A> Step2(
    height=-0.2,
    offset=1,
    startTime=40);
<font color="blue">equation </font>
  <font color="red">connect</font>(SourceW1.flange, SensT1.inlet);
  <font color="red">connect</font>(SensT1.outlet, hex.infl);
  <font color="red">connect</font>(hex.outfl, ValveLin1.inlet);
  <font color="red">connect</font>(ValveLin1.outlet, SensT2.inlet);
  <font color="red">connect</font>(SensT2.outlet, SinkP1.flange);
  <font color="red">connect</font>(HeatSource1D1.wall, hex.wall);
  <font color="red">connect</font>(Step1.y, HeatSource1D1.power);
  <font color="red">connect</font>(Step4.y, SourceW1.in_T);
  <font color="red">connect</font>(Step2.y, ValveLin1.cmd);
  Mhex = hex.M;
  <font color="red">der</font>(Mbal) = hex.infl.w + hex.outfl.w;
  Merr = Mhex-Mbal;
<font color="blue">initial </font><font color="blue">equation </font>
  Mbal = Mhex;

<font color="blue">end </font>TestGasFlow1DA;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestGasFlow1DB<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestGasFlow1DB"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestGasFlow1DB</H2>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestGasFlow1DBD.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestGasFlow1DB">
<H3>Information</H3>
<PRE></pre>
Same as <tt>TestGasFlow1DA</tt>, but with mixture fluid (CombustionAir) and UniformComposition = true. The inlet composition is changed stepwise at time t = 30;
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_IdealGases_SingleGases_N2.html#Modelica.Media.IdealGases.SingleGases.N2"
>N2</A></TD><TD>&nbsp;</TD></TR>
<TR><TD>Integer</TD><TD>Nnodes</TD><TD>10</TD><TD>number of Nodes</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Lhex</TD><TD>200</TD><TD>total length [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>Dihex</TD><TD>0.02</TD><TD>internal diameter [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A></TD><TD>rhex</TD><TD>Dihex/2</TD><TD>internal radius [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omegahex</TD><TD>Modelica.Constants.pi*Dihex</TD><TD>internal perimeter [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>Ahex</TD><TD>Modelica.Constants.pi*rhex^2</TD><TD>internal cross section [m2]</TD></TR>
<TR><TD>Real</TD><TD>Cfhex</TD><TD>0.005</TD><TD>friction coefficient</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>whex</TD><TD>0.05</TD><TD>nominal (and initial) mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>phex</TD><TD>3e5</TD><TD>initial pressure [Pa]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</A></TD><TD>Tinhex</TD><TD>300</TD><TD>initial inlet temperature [K]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</A></TD><TD>Touthex</TD><TD>300</TD><TD>initial outlet temperature [K]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.EnergyFlowRate"
>EnergyFlowRate</A></TD><TD>W</TD><TD>1e3</TD><TD>height of power step [W]</TD></TR>
<TR><TD>Real</TD><TD>deltaX[2]</TD><TD>{.05,-.05}</TD><TD>height of composition step</TD></TR>
</TABLE>
<H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD>&nbsp;</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestGasFlow1DB
  <font color="blue">extends </font><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestGasFlow1DA"
>ThermoPower.Test.ThermoHydraulicElements.TestGasFlow1DA</A>(
      <font color="blue">redeclare </font><font color="blue">package</font> Medium =
        <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Media_IdealGases_MixtureGases_CombustionAir.html#Modelica.Media.IdealGases.MixtureGases.CombustionAir"
>Modelica.Media.IdealGases.MixtureGases.CombustionAir</A>);
  <font color="blue">parameter </font>Real deltaX[2]={.05,-.05} <font color="darkgreen">&quot;height of composition step&quot;</font>;

  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Step"
>Modelica.Blocks.Sources.Step</A>[2] Step3(
    height=deltaX,
    startTime=30,
    offset=Medium.reference_X);
<font color="blue">equation </font>
  <font color="red">connect</font>(Step3.y, SourceW1.in_X);
<font color="blue">end </font>TestGasFlow1DB;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestGasFlow1DC<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestGasFlow1DC"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestGasFlow1DC</H2>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestGasFlow1DBD.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestGasFlow1DC">
<H3>Information</H3>
<PRE></pre>
Same as <tt>TestGasFlow1DB</tt>, but with UniformComposition = false. The outlet composition transient is computed with greater accuracy.
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>Nnodes</TD><TD>10</TD><TD>number of Nodes</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Lhex</TD><TD>200</TD><TD>total length [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>Dihex</TD><TD>0.02</TD><TD>internal diameter [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A></TD><TD>rhex</TD><TD>Dihex/2</TD><TD>internal radius [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omegahex</TD><TD>Modelica.Constants.pi*Dihex</TD><TD>internal perimeter [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>Ahex</TD><TD>Modelica.Constants.pi*rhex^2</TD><TD>internal cross section [m2]</TD></TR>
<TR><TD>Real</TD><TD>Cfhex</TD><TD>0.005</TD><TD>friction coefficient</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>whex</TD><TD>0.05</TD><TD>nominal (and initial) mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>phex</TD><TD>3e5</TD><TD>initial pressure [Pa]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</A></TD><TD>Tinhex</TD><TD>300</TD><TD>initial inlet temperature [K]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</A></TD><TD>Touthex</TD><TD>300</TD><TD>initial outlet temperature [K]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.EnergyFlowRate"
>EnergyFlowRate</A></TD><TD>W</TD><TD>1e3</TD><TD>height of power step [W]</TD></TR>
<TR><TD>Real</TD><TD>deltaX[2]</TD><TD>{.05,-.05}</TD><TD>height of composition step</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestGasFlow1DC
  <font color="blue">extends </font><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestGasFlow1DB"
>ThermoPower.Test.ThermoHydraulicElements.TestGasFlow1DB</A>(hex(
        UniformComposition=false));
<font color="blue">end </font>TestGasFlow1DC;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestGasFlow1DD<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="ThermoPower.Test.ThermoHydraulicElements.TestGasFlow1DD"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestGasFlow1DD</H2>
<IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestGasFlow1DBD.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestGasFlow1DD">
<H3>Information</H3>
<PRE></pre>
Same as <tt>TestGasFlow1DB</tt>, but with QuasiStatic = true; the model is purely algebraic (no mass and energy storage).
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>Nnodes</TD><TD>10</TD><TD>number of Nodes</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Lhex</TD><TD>200</TD><TD>total length [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>Dihex</TD><TD>0.02</TD><TD>internal diameter [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Radius"
>Radius</A></TD><TD>rhex</TD><TD>Dihex/2</TD><TD>internal radius [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omegahex</TD><TD>Modelica.Constants.pi*Dihex</TD><TD>internal perimeter [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>Ahex</TD><TD>Modelica.Constants.pi*rhex^2</TD><TD>internal cross section [m2]</TD></TR>
<TR><TD>Real</TD><TD>Cfhex</TD><TD>0.005</TD><TD>friction coefficient</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>whex</TD><TD>0.05</TD><TD>nominal (and initial) mass flow rate [kg/s]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>phex</TD><TD>3e5</TD><TD>initial pressure [Pa]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</A></TD><TD>Tinhex</TD><TD>300</TD><TD>initial inlet temperature [K]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</A></TD><TD>Touthex</TD><TD>300</TD><TD>initial outlet temperature [K]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.EnergyFlowRate"
>EnergyFlowRate</A></TD><TD>W</TD><TD>1e3</TD><TD>height of power step [W]</TD></TR>
<TR><TD>Real</TD><TD>deltaX[2]</TD><TD>{.05,-.05}</TD><TD>height of composition step</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestGasFlow1DD
  <font color="blue">extends </font><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements.TestGasFlow1DB"
>ThermoPower.Test.ThermoHydraulicElements.TestGasFlow1DB</A>(hex(
        QuasiStatic=true));
<font color="blue">end </font>TestGasFlow1DD;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestEvaporatorTemp<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestEvaporatorTempI.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestEvaporatorTemp" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="ThermoPower.Test.ThermoHydraulicElements.TestEvaporatorTemp"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestEvaporatorTemp</H2>
<H3>Information</H3>
<PRE></pre>
The moving boundary evaporator model is still incomplete, and it fails at t = 245.
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD>Modelica.Media.Water.Standar...</TD><TD>Medium model</TD></TR>
<TR><TD>Integer</TD><TD>N</TD><TD>2</TD><TD>Number of nodes for thermal variables</TD></TR>
<TR><TD>Integer</TD><TD>Nt</TD><TD>1</TD><TD>Number of tubes in parallel</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Distance"
>Distance</A></TD><TD>L</TD><TD>30</TD><TD>Tube length [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Position"
>Position</A></TD><TD>H</TD><TD>0</TD><TD>Elevation of outlet over inlet [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>A</TD><TD>1e-4</TD><TD>Cross-sectional area (single tube) [m2]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omega</TD><TD>1e-2</TD><TD>Perimeter of heat transfer surface (single tube) [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Dhyd</TD><TD>1e-3</TD><TD>Hydraulic Diameter (single tube) [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>wnom</TD><TD>0.1</TD><TD>Nominal mass flowrate (total) [kg/s]</TD></TR>
<TR><TD>Integer</TD><TD>FFtype</TD><TD>0</TD><TD>Friction Factor Type (0: Kf; 1:OpPoint, 2:Cfnom, 3:Colebrook)</TD></TR>
<TR><TD>Real</TD><TD>Kfnom</TD><TD>0</TD><TD>Nominal hydraulic resistance coefficient</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dpnom</TD><TD>0</TD><TD>Nominal pressure drop (friction term only!) [Pa]</TD></TR>
<TR><TD><A HREF="ThermoPower.html#ThermoPower.Density"
>Density</A></TD><TD>rhonom</TD><TD>0</TD><TD>Nominal inlet density [kg/m3]</TD></TR>
<TR><TD>Real</TD><TD>Cfnom</TD><TD>0</TD><TD>Nominal Fanning friction factor</TD></TR>
<TR><TD>Real</TD><TD>e</TD><TD>0</TD><TD>Relative roughness (ratio roughness/diameter)</TD></TR>
<TR><TD>Boolean</TD><TD>DynamicMomentum</TD><TD>false</TD><TD>Inertial phenomena accounted for</TD></TR>
<TR><TD>Integer</TD><TD>HydraulicCapacitance</TD><TD>2</TD><TD>1: Upstream, 2: Downstream</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>csilstart</TD><TD>0.2*L</TD><TD>Liquid boundary start position [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>csivstart</TD><TD>0.8*L</TD><TD>Vapour boundary start position [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>hstartin</TD><TD>8e5</TD><TD>Inlet enthalpy start value [J/kg]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>hstartout</TD><TD>2.9e6</TD><TD>Outlet enthalpy start value [J/kg]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>pstartin</TD><TD>10e5</TD><TD>Inlet pressure start value [Pa]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>pstartout</TD><TD>1e5</TD><TD>Outlet pressure start value [Pa]</TD></TR>
<TR><TD>Real</TD><TD>wnf</TD><TD>0.01</TD><TD>Fraction of nominal flow rate at which linear friction equals turbulent friction</TD></TR>
<TR><TD>Real</TD><TD>Kfc</TD><TD>1</TD><TD>Friction factor correction coefficient</TD></TR>
<TR><TD>Real</TD><TD>K</TD><TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
</TABLE>
<H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD>Medium model</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestEvaporatorTemp
  <font color="blue">extends </font><A HREF="ThermoPower_Water.html#ThermoPower.Water.EvaporatorBase"
>Water.EvaporatorBase</A>(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium=Modelica.Media.Water.StandardWater,
    L=30,
    A=1e-4,
    omega=1e-2,
    Dhyd=1e-3,
    wnom=0.1,
    FFtype=0,
    pstartin=10e5,
    hstartin=8e5,
    hstartout=2.9e6,
    csilstart=0.2*L,
    csivstart=0.8*L);
  <A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</A> Text <font color="darkgreen">&quot;External temperature&quot;</font>;
  <font color="blue">parameter </font>Real K( fixed=false, start=1.2e3);
<font color="blue">equation </font>
  Text=700 - 2*<font color="red">min</font>(<font color="red">max</font>(time-1,0),70)+ 2*<font color="red">min</font>(<font color="red">max</font>(time-300,0),70);
  Ql=K*(Text-fluid_in.T)*csil/L * (1-<font color="red">min</font>(<font color="red">max</font>(time-100,0),160)/200+<font color="red">min</font>(<font color="red">max</font>(time-400,0),200)/200);
  Qb=K*(Text-sat.Tsat)*(csiv-csil)/L * (1-<font color="red">min</font>(<font color="red">max</font>(time-100,0),160)/200+<font color="red">min</font>(<font color="red">max</font>(time-400,0),200)/200);
  Qv=K*(Text-fluid_out.T)*(L-csiv)/L * (1-<font color="red">min</font>(<font color="red">max</font>(time-100,0),160)/200+<font color="red">min</font>(<font color="red">max</font>(time-400,0),200)/200);
  hin=8e5;
  win=0.1;
  wout=0.1/60e5*p;
<font color="blue">initial </font><font color="blue">equation </font>
  <font color="red">der</font>(csil)=0;
  <font color="red">der</font>(csiv)=0;
  <font color="red">der</font>(hout)=0;
  hout=2.9e6;
  <font color="red">der</font>(p)=0;
<font color="blue">end </font>TestEvaporatorTemp;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestEvaporatorFlux<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="ThermoPower.Test.ThermoHydraulicElements.TestEvaporatorTempI.png" ALT="ThermoPower.Test.ThermoHydraulicElements.TestEvaporatorFlux" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="ThermoPower.Test.ThermoHydraulicElements.TestEvaporatorFlux"></A><A HREF="ThermoPower_Test_ThermoHydraulicElements.html#ThermoPower.Test.ThermoHydraulicElements"
>ThermoPower.Test.ThermoHydraulicElements</A>.TestEvaporatorFlux</H2>
<H3>Information</H3>
<PRE></pre>
The moving boundary evaporator model is still incomplete, and it fails at t = 12.
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD>Modelica.Media.Water.Standar...</TD><TD>Medium model</TD></TR>
<TR><TD>Integer</TD><TD>N</TD><TD>2</TD><TD>Number of nodes for thermal variables</TD></TR>
<TR><TD>Integer</TD><TD>Nt</TD><TD>1</TD><TD>Number of tubes in parallel</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Distance"
>Distance</A></TD><TD>L</TD><TD>30</TD><TD>Tube length [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Position"
>Position</A></TD><TD>H</TD><TD>0</TD><TD>Elevation of outlet over inlet [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>A</TD><TD>1e-4</TD><TD>Cross-sectional area (single tube) [m2]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>omega</TD><TD>1e-2</TD><TD>Perimeter of heat transfer surface (single tube) [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>Dhyd</TD><TD>1e-3</TD><TD>Hydraulic Diameter (single tube) [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>wnom</TD><TD>0.1</TD><TD>Nominal mass flowrate (total) [kg/s]</TD></TR>
<TR><TD>Integer</TD><TD>FFtype</TD><TD>0</TD><TD>Friction Factor Type (0: Kf; 1:OpPoint, 2:Cfnom, 3:Colebrook)</TD></TR>
<TR><TD>Real</TD><TD>Kfnom</TD><TD>0</TD><TD>Nominal hydraulic resistance coefficient</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dpnom</TD><TD>0</TD><TD>Nominal pressure drop (friction term only!) [Pa]</TD></TR>
<TR><TD><A HREF="ThermoPower.html#ThermoPower.Density"
>Density</A></TD><TD>rhonom</TD><TD>0</TD><TD>Nominal inlet density [kg/m3]</TD></TR>
<TR><TD>Real</TD><TD>Cfnom</TD><TD>0</TD><TD>Nominal Fanning friction factor</TD></TR>
<TR><TD>Real</TD><TD>e</TD><TD>0</TD><TD>Relative roughness (ratio roughness/diameter)</TD></TR>
<TR><TD>Boolean</TD><TD>DynamicMomentum</TD><TD>false</TD><TD>Inertial phenomena accounted for</TD></TR>
<TR><TD>Integer</TD><TD>HydraulicCapacitance</TD><TD>2</TD><TD>1: Upstream, 2: Downstream</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>csilstart</TD><TD>0</TD><TD>Liquid boundary start position [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>csivstart</TD><TD>0</TD><TD>Vapour boundary start position [m]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>hstartin</TD><TD>4e5</TD><TD>Inlet enthalpy start value [J/kg]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>hstartout</TD><TD>4e5</TD><TD>Outlet enthalpy start value [J/kg]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>pstartin</TD><TD>10e5</TD><TD>Inlet pressure start value [Pa]</TD></TR>
<TR><TD><A HREF="file:///C:/Programmi/Dymola 6.1/Modelica/Library/Modelica 2.2.1/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>pstartout</TD><TD>1e5</TD><TD>Outlet pressure start value [Pa]</TD></TR>
<TR><TD>Real</TD><TD>wnf</TD><TD>0.01</TD><TD>Fraction of nominal flow rate at which linear friction equals turbulent friction</TD></TR>
<TR><TD>Real</TD><TD>Kfc</TD><TD>1</TD><TD>Friction factor correction coefficient</TD></TR>
</TABLE>
<H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD>Medium model</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestEvaporatorFlux
  <font color="blue">extends </font><A HREF="ThermoPower_Water.html#ThermoPower.Water.EvaporatorBase"
>Water.EvaporatorBase</A>(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium=Modelica.Media.Water.StandardWater,
    L=30,
    A=1e-4,
    omega=1e-2,
    Dhyd=1e-3,
    wnom=0.1,
    FFtype=0,
    pstartin=10e5,
    hstartin=4e5,
    hstartout=4e5,
    csilstart=0,
    csivstart=0);
<font color="blue">equation </font>
  Ql=2.5e5*csil/L *<font color="red">min</font>(<font color="red">max</font>(time-10,0),100);
  Qb=2.5e5*(csiv-csil)/L *<font color="red"> min</font>(<font color="red">max</font>(time-10,0),100);
  Qv=2.5e5*(L-csiv)/L *<font color="red"> min</font>(<font color="red">max</font>(time-10,0),100);
  hin=4e5;
  win=0.1;
  wout=0.1/10e5*p;
<font color="blue">initial </font><font color="blue">equation </font>
  csil=L;
  csiv=L;
  hout=4e5;
  <font color="red">der</font>(p)=0;
<font color="blue">end </font>TestEvaporatorFlux;
</PRE>
<HR>
<address>HTML-documentation generated by <a href="http://www.dynasim.se/">Dymola</a> Tue Jul 07 01:26:04 2009.
</address></BODY>
</HTML>
